<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <!-- 添加全局禁用 Referer -->
      <meta name="referrer" content="no-referrer" />
      <meta charset="utf-8" />
       
      <meta name="keywords" content="技术,编程,开发,Hexo" />
       
      <meta name="description" content="个人技术博客，分享编程、开发经验和生活感悟" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Flutter-详解布局 |  Gavin&#39;s Blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
      <!-- Font Awesome 6 -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link rel="alternate" href="/atom.xml" title="Gavin's Blog" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="[layout]-Flutter-详解布局"
  class="article article-type-[layout]"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Flutter-详解布局
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2025/07/07/Flutter-%E8%AF%A6%E8%A7%A3%E5%B8%83%E5%B1%80/" class="article-date">
  <time datetime="2025-07-07T07:30:56.000Z" itemprop="datePublished">2025-07-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flutter/">Flutter</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">17.1k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">72 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>上一章我们详细的学习了 Flutter 中的<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c6fe1cf0ff45">Widget</a>，这一章我们将要学习 Flutter 的<code>布局</code>， 在上一章我们了解到了：Everything is a widget，在 Flutter 中几乎所有的对象都是一个 <code>Widget</code> ，当然也包括布局，Flutter 的布局系统基于 <code>Widget </code>树，通过组合不同的布局 <code>Widget</code> 实现复杂的 UI，你在 Flutter 应用程序中能直接看到的图像，图标和文本都是 <code>Widget</code>。此外不能直接看到的也是 <code>Widget</code>，如用来排列、限制和对齐可见 <code>Widget</code> 的行、列和网格。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/GavinCarter1991/flutter-layout-demo">DEMO</a></p>
<h1 id="布局规则"><a href="#布局规则" class="headerlink" title="布局规则"></a>布局规则</h1><p><strong>1.约束由父组件向子组件传导，大小由子组件向父组件传导，位置由父组件决定。</strong></p>
<p><strong>2.布局Widget是Flutter UI的基础，理解它们的规则和适用场景非常重要</strong></p>
<h1 id="核心布局控件-多子组件"><a href="#核心布局控件-多子组件" class="headerlink" title="核心布局控件 (多子组件)"></a>核心布局控件 (多子组件)</h1><h2 id="1-Row-amp-Column"><a href="#1-Row-amp-Column" class="headerlink" title="1. Row &amp; Column"></a>1. Row &amp; Column</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> Row水平排列子Widget，Column垂直排列子Widget</p>
</li>
<li><p><strong>规则：</strong> 子Widget可以是非弹性（不扩展）或弹性（Expanded）。主轴-mainAxisAlignment（Row 为 X 轴，Column 为 Y 轴）和交叉轴-crossAxisAlignment（Row 为 Y 轴，Column 为 X 轴）</p>
</li>
<li><p><strong>注意：</strong></p>
</li>
<li><p>1.当子Widget的总长度超过主轴长度时，会溢出（常见错误：黄色黑色条纹警告）。可以使用Expanded或Flexible来避免，或者使用ListView代替</p>
</li>
<li><p>2.如果没有指定主轴对齐方式（mainAxisAlignment）和交叉轴对齐方式（crossAxisAlignment），默认是start和stretch</p>
</li>
<li><p><strong>推荐：</strong> 用于线性排列多个子Widget，如：导航栏（Row）、表单项列表（Column）、图文混排（Row + Column 嵌套），如果子Widget较多且可能超出屏幕，考虑使用ListView。</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.spaceBetween, // 主轴均匀分布</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.center, // 交叉轴居中</span><br><span class="line">  children: [</span><br><span class="line">    Container(width: 50, height: 50, color: Colors.red),</span><br><span class="line">    Expanded(child: Container(height: 30, color: Colors.green)), // 弹性填充剩余空间</span><br><span class="line">    Container(width: 50, height: 50, color: Colors.blue),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-0f77998e7ccc506f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ROW"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.spaceBetween, // 主轴均匀分布</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.center, // 交叉轴居中</span><br><span class="line">  children: [</span><br><span class="line">    Container(width: 50, height: 50, color: Colors.red),</span><br><span class="line">    Expanded(child: Container(height: 30, color: Colors.green)), // 弹性填充剩余空间</span><br><span class="line">    Container(width: 50, height: 50, color: Colors.blue),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-9d2e8d107c3b5f44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Column"></p>
<h2 id="2-Stack"><a href="#2-Stack" class="headerlink" title="2. Stack"></a>2. Stack</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 将子Widget重叠在一起。第一个子Widget在底部，后面的依次在上层</p>
</li>
<li><p><strong>规则：</strong> 子Widget可以使用Positioned来定位，否则放置在左上角。如果没有定位，则根据alignment属性对齐（默认左上角）,子 Widget 顺序决定绘制顺序（后绘制的在上层）</p>
</li>
<li><p><strong>注意：</strong> 如果不使用Positioned，且Stack没有指定大小，那么Stack会调整到包裹所有未定位的子Widget（但如果有定位的子Widget，则定位的子Widget不影响Stack大小）, Positioned 的子 Widget 可能超出 Stack 边界（需 <code>Clip</code> 处理）</p>
</li>
<li><p><strong>推荐：</strong> 用于需要重叠的布局，如图片上的标签、浮动按钮、自定义进度条</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Stack(</span><br><span class="line">  alignment: Alignment.center, // 所有子Widget居中</span><br><span class="line">  children: [</span><br><span class="line">    Container(width: 200, height: 200, color: Colors.blue), // 底层</span><br><span class="line">    Positioned(</span><br><span class="line">      bottom: 10,</span><br><span class="line">      right: 10,</span><br><span class="line">      child: Container(width: 50, height: 50, color: Colors.red), // 定位到右下</span><br><span class="line">    ),</span><br><span class="line">    const Text(&quot;Stack Example&quot;), // 文字居中</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-aa664a2dba537c26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Stack"></p>
<h2 id="3-Wrap"><a href="#3-Wrap" class="headerlink" title="3. Wrap"></a>3. Wrap</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 当一行（或一列）放不下子Widget时，自动换行（或换列）</p>
</li>
<li><p><strong>规则：</strong> 可以设置方向（水平或垂直）、间距（spacing-主轴方向间距）和行间距（runSpacing-交叉轴方向行间距）</p>
</li>
<li><p><strong>注意：</strong> 与Row不同，Wrap不会溢出，而是换行。但要注意如果子Widget很大且没有足够空间，可能会超出屏幕（在换行方向），按需换行，避免溢出，子 Widget 数量极大时应用 Wrap.builder，计算间距不要忽略 spacing 和 runSpacing 不然容易导致布局重叠</p>
</li>
<li><p><strong>推荐：</strong> 用于流式布局，如标签列表、筛选条件栏、自适应按钮组</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Wrap(</span><br><span class="line">  spacing: 8.0, // 水平间距</span><br><span class="line">  runSpacing: 4.0, // 垂直间距（行间距）</span><br><span class="line">  children: [</span><br><span class="line">    Chip(label: Text(&#x27;标签1&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签2&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签3&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签4&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签5&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签6&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签7&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签8&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签9&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签10&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签11&#x27;)),</span><br><span class="line">    Chip(label: Text(&#x27;标签12&#x27;)),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-c4a8a811e079ba1d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Wrap"></p>
<h2 id="4-Flow"><a href="#4-Flow" class="headerlink" title="4. Flow"></a>4. Flow</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> </p>
</li>
<li><p>1.Flow 需要自定义布局逻辑时使用，通过delegate控制每个子Widget的位置和大小。性能较好，因为子Widget可以独立定位而不影响父Widget</p>
</li>
<li><p>2.动态增减子元素：在delegate中监听数据变化，调用context.invalidateLayout()重布局</p>
</li>
<li><p><strong>规则：</strong> Flow：高性能自定义布局（需实现 FlowDelegate）</p>
</li>
<li><p><strong>注意：</strong> 通过委托计算（delegate-calculated）实现动态自适应，胜任复杂场景，当布局复杂度低时，优先用Wrap简化开发</p>
</li>
<li><p><strong>推荐：</strong> 复杂动画布局，避免Wrap的多次测量，适合动态加载&#x2F;高频更新场景</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class MyFlowDelegate extends FlowDelegate &#123;</span><br><span class="line">  @override</span><br><span class="line">  void paintChildren(FlowPaintingContext context) &#123;</span><br><span class="line">    var x = 0.0, y = 0.0;</span><br><span class="line">    for (var i = 0; i &lt; context.childCount; i++) &#123;</span><br><span class="line">      // 动态计算每个子组件位置</span><br><span class="line">      final childSize = context.getChildSize(i)!;</span><br><span class="line">      context.paintChild(i, transform: Matrix4.translationValues(x, y, 0));</span><br><span class="line">      x += childSize.width * 0.8; // 重叠效果</span><br><span class="line">      y += childSize.height * 0.2;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldRepaint(covariant FlowDelegate oldDelegate) =&gt; true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Flow(</span><br><span class="line">  delegate: MyFlowDelegate(),</span><br><span class="line">  children: List.generate(</span><br><span class="line">      5,</span><br><span class="line">      (index) =&gt; Container(</span><br><span class="line">            width: 80,</span><br><span class="line">            height: 80,</span><br><span class="line">            color: Colors.primaries[index],</span><br><span class="line">          )),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-ce736ecf89cfae2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Flow"></p>
<span id="more"></span>


<h2 id="5-ListView"><a href="#5-ListView" class="headerlink" title="5. ListView"></a>5. ListView</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 可滚动的线性布局，支持水平和垂直方向</p>
</li>
<li><p><strong>规则：</strong> 如果子Widget数量固定，使用ListView(children: […])，如果数量多，使用ListView.builder按需构建</p>
</li>
<li><p><strong>注意：</strong> 直接使用children方式构建大量子Widget会导致性能问题，因为会一次性构建所有子Widget。对于长列表，务必使用builder，嵌套 ListView 时需明确滚动方向</p>
</li>
<li><p><strong>推荐：</strong> 用于需要滚动的列表，例如消息列表、设置菜单、长数据展示</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">    itemCount: 100,</span><br><span class="line">    itemBuilder: (context, index) &#123;</span><br><span class="line">      return ListTile(</span><br><span class="line">        title: Text(&#x27;Item $index&#x27;),</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-3fe3070d3e246234.gif?imageMogr2/auto-orient/strip" alt="ListView"></p>
<h2 id="6-GridView"><a href="#6-GridView" class="headerlink" title="6. GridView"></a>6. GridView</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 网格布局</p>
</li>
<li><p><strong>规则：</strong> 有多种构造方式：GridView.count（固定列数）、GridView.extent（固定最大交叉轴长度）、GridView.builder（按需构建）</p>
</li>
<li><p><strong>注意：</strong> 同样要注意性能，长列表使用builder，要正确设置 childAspectRatio 不然容易导致单元格变形</p>
</li>
<li><p><strong>推荐：</strong> 用于展示网格状内容，如图片墙、产品网格、仪表盘卡片</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var array = [Colors.blue, Colors.red, Colors.yellow];</span><br><span class="line">GridView.count(</span><br><span class="line">  crossAxisCount: 3, // 每行3列</span><br><span class="line">  childAspectRatio: 1.0, // 宽高比</span><br><span class="line">  children: List.generate(</span><br><span class="line">      9,</span><br><span class="line">      (index) =&gt; Container(</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              color: array[index % 3],</span><br><span class="line">              borderRadius: BorderRadius.circular(8.0),</span><br><span class="line">            ),</span><br><span class="line">            child: Center(child: Text(&#x27;Item $index&#x27;)),</span><br><span class="line">          )),</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-d7cab59e26a42a4c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="GridView"></p>
<h2 id="7-Table"><a href="#7-Table" class="headerlink" title="7. Table"></a>7. Table</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 是一种基于表格模型的布局方式</p>
</li>
<li><p><strong>规则：</strong> 每一行的高度由内容决定，列宽可通过 columnWidths 属性自定义。<br>支持多种列宽类型：FixedColumnWidth（固定宽度）、FlexColumnWidth（弹性比例）、FractionColumnWidth（百分比）等，通过 rowHeight 属性设置固定行高，或通过 TableRow 的 height 属性单独调整某一行，在 TableRow 中嵌套 Row、Column 或其他布局组件，实现复杂内容排版，通过 MediaQuery 动态调整列宽比例，适配不同屏幕尺寸</p>
</li>
<li><p><strong>注意：</strong> 避免在大量数据中直接使用 Table，推荐结合 ListView 或 CustomScrollView 分页加载</p>
</li>
<li><p><strong>推荐：</strong> 适用于需要行列对齐的复杂场景，Stack + Table：在表格中叠加其他组件（如悬浮按钮），Wrap + Table：结合弹性布局实现自适应表格</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Table(</span><br><span class="line">  columnWidths: const &#123;</span><br><span class="line">    0: FixedColumnWidth(80), // 第一列固定宽度</span><br><span class="line">    1: FlexColumnWidth(2), // 第二列弹性宽度（占比更大）</span><br><span class="line">    2: IntrinsicColumnWidth(), // 第三列自适应内容宽度</span><br><span class="line">  &#125;,</span><br><span class="line">  border: TableBorder.all(color: Colors.black, width: 1.0),</span><br><span class="line">  defaultVerticalAlignment: TableCellVerticalAlignment.middle, // 垂直居中</span><br><span class="line">  children: const [</span><br><span class="line">    TableRow(</span><br><span class="line">      // 表头行</span><br><span class="line">      decoration: BoxDecoration(color: Colors.grey),</span><br><span class="line">      children: [</span><br><span class="line">        Text(&#x27;姓名&#x27;, textAlign: TextAlign.center),</span><br><span class="line">        Text(&#x27;性别&#x27;, textAlign: TextAlign.center),</span><br><span class="line">        Text(&#x27;年龄&#x27;, textAlign: TextAlign.center),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    TableRow(</span><br><span class="line">      // 数据行</span><br><span class="line">      children: [</span><br><span class="line">        Text(&#x27;张三&#x27;),</span><br><span class="line">        Text(&#x27;男&#x27;),</span><br><span class="line">        Text(&#x27;25&#x27;),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-fc6e105cb97388d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Table"></p>
<h2 id="8-CustomScrollView"><a href="#8-CustomScrollView" class="headerlink" title="8. CustomScrollView"></a>8. CustomScrollView</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 是 Flutter 处理复杂滚动场景的核心工具，通过灵活组合 Sliver 组件，可实现头部折叠、多类型布局、吸顶等高级交互，</p>
</li>
<li><p><strong>规则：</strong> 所有子组件共享同一个滚动控制器，确保联动滑动，仅渲染可见区域的 Sliver，其子组件必须是 Sliver 家族成员（如 SliverList、SliverGrid、SliverToBoxAdapter 等），普通组件需通过 SliverToBoxAdapter 包裹才能嵌入</p>
</li>
<li><p><strong>注意：</strong> Sliver 的使用规范及性能优化，必要时结合 <code>NestedScrollView</code> 解决嵌套滚动问题，避免嵌套滚动组件</p>
</li>
<li><p><strong>推荐：</strong> 实现统一且复杂的滚动效果。它像“粘合剂”一样将不同布局粘合为整体滚动区域，解决嵌套滚动冲突问题（例如 ListView 嵌套 GridView 需手动指定高度）</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Table(</span><br><span class="line">  columnWidths: const &#123;</span><br><span class="line">    0: FixedColumnWidth(80), // 第一列固定宽度</span><br><span class="line">    1: FlexColumnWidth(2), // 第二列弹性宽度（占比更大）</span><br><span class="line">    2: IntrinsicColumnWidth(), // 第三列自适应内容宽度</span><br><span class="line">  &#125;,</span><br><span class="line">  border: TableBorder.all(color: Colors.black, width: 1.0),</span><br><span class="line">  defaultVerticalAlignment: TableCellVerticalAlignment.middle, // 垂直居中</span><br><span class="line">  children: const [</span><br><span class="line">    TableRow(</span><br><span class="line">      // 表头行</span><br><span class="line">      decoration: BoxDecoration(color: Colors.grey),</span><br><span class="line">      children: [</span><br><span class="line">        Text(&#x27;姓名&#x27;, textAlign: TextAlign.center),</span><br><span class="line">        Text(&#x27;性别&#x27;, textAlign: TextAlign.center),</span><br><span class="line">        Text(&#x27;年龄&#x27;, textAlign: TextAlign.center),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    TableRow(</span><br><span class="line">      // 数据行</span><br><span class="line">      children: [</span><br><span class="line">        Text(&#x27;张三&#x27;),</span><br><span class="line">        Text(&#x27;男&#x27;),</span><br><span class="line">        Text(&#x27;25&#x27;),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-d7b7599d3b1a3a9f.gif?imageMogr2/auto-orient/strip" alt="CustomScrollView"></p>
<h2 id="9-IndexedStack"><a href="#9-IndexedStack" class="headerlink" title="9. IndexedStack"></a>9. IndexedStack</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> IndexedStack 是 Stack 的子类（extends Stack），是一种层叠布局组件，专门用于在同一位置切换显示不同子组件</p>
</li>
<li><p><strong>规则：</strong> IndexedStack 继承自 Stack 组件，通过 index 属性控制当前显示的子组件。与 Stack 的叠加显示不同，IndexedStack 仅渲染指定索引的子项，其他子项处于隐藏状态，尺寸由最大的子组件决定，与当前显示的 index 无关。支持 alignment 对齐属性，可结合 Positioned 实现精确定位，所有子组件会预先加载到内存中，适合需要保持面状态的场景（如 Tab 切换）。通过 Offstage 隐藏非活跃子项，而非销毁</p>
</li>
<li><p><strong>注意：</strong> 子组件过多或复杂时可能引发内存压力，通过 setState 修改 index 实现无动画切换，适合高频操作场景，可通过 RepaintBoundary 优化绘制性能，需要精确定位时，推荐组合使用 Positioned 而非 Align</p>
</li>
<li><p><strong>推荐：</strong> 优先用于少量子项的场景，复杂页面建议结合 PageView 使用</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">class DynamicIndexedStack extends StatefulWidget &#123;</span><br><span class="line">  @override </span><br><span class="line">  _DynamicIndexedStackState createState() =&gt; _DynamicIndexedStackState();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class _DynamicIndexedStackState extends State&lt;DynamicIndexedStack&gt; &#123;</span><br><span class="line">  int _currentIndex = 0;</span><br><span class="line"> </span><br><span class="line">  final List&lt;Widget&gt; _pages = [</span><br><span class="line">    PageWidget(title: &quot;页面1&quot;, color: Colors.red), </span><br><span class="line">    PageWidget(title: &quot;页面2&quot;, color: Colors.green), </span><br><span class="line">    PageWidget(title: &quot;页面3&quot;, color: Colors.blue), </span><br><span class="line">  ];</span><br><span class="line"> </span><br><span class="line">  @override </span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Column(</span><br><span class="line">      children: [</span><br><span class="line">        // 切换按钮 </span><br><span class="line">        Row(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center, </span><br><span class="line">          children: [</span><br><span class="line">            _buildButton(0, &quot;页面1&quot;),</span><br><span class="line">            _buildButton(1, &quot;页面2&quot;),</span><br><span class="line">            _buildButton(2, &quot;页面3&quot;),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        </span><br><span class="line">        // IndexedStack区域 </span><br><span class="line">        Expanded(</span><br><span class="line">          child: IndexedStack(</span><br><span class="line">            index: _currentIndex,</span><br><span class="line">            children: _pages,</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  Widget _buildButton(int index, String text) &#123;</span><br><span class="line">    return ElevatedButton(</span><br><span class="line">      onPressed: () =&gt; setState(() =&gt; _currentIndex = index),</span><br><span class="line">      style: ElevatedButton.styleFrom( </span><br><span class="line">        backgroundColor: _currentIndex == index ? Colors.amber  : null,</span><br><span class="line">      ),</span><br><span class="line">      child: Text(text),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">// 带状态的页面组件（验证状态保留）</span><br><span class="line">class PageWidget extends StatefulWidget &#123;</span><br><span class="line">  final String title;</span><br><span class="line">  final Color color;</span><br><span class="line"> </span><br><span class="line">  PageWidget(&#123;required this.title,  required this.color&#125;); </span><br><span class="line"> </span><br><span class="line">  @override </span><br><span class="line">  _PageWidgetState createState() =&gt; _PageWidgetState();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class _PageWidgetState extends State&lt;PageWidget&gt; &#123;</span><br><span class="line">  int _counter = 0;</span><br><span class="line"> </span><br><span class="line">  @override </span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Container(</span><br><span class="line">      color: widget.color.withOpacity(0.3), </span><br><span class="line">      child: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisSize: MainAxisSize.min, </span><br><span class="line">          children: [</span><br><span class="line">            Text(widget.title,  style: TextStyle(fontSize: 24)),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () =&gt; setState(() =&gt; _counter++),</span><br><span class="line">              child: Text(&quot;计数: $_counter&quot;),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-2e56190732b81b76.gif?imageMogr2/auto-orient/strip" alt="IndexedStack"></p>
<h2 id="10-Flex"><a href="#10-Flex" class="headerlink" title="10. Flex"></a>10. Flex</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 动态增减子元素：使用Key触发子树重建</p>
</li>
<li><p><strong>规则：</strong> Flex：更底层的 Row&#x2F;Column（需配合 Flexible）</p>
</li>
<li><p><strong>注意：</strong> 通过约束驱动（constraint-driven）实现空间比例分配，适合结构化界面</p>
</li>
<li><p><strong>推荐：</strong> 自定义排版</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Flex(</span><br><span class="line">  // 等价于Column</span><br><span class="line">  direction: Axis.vertical,</span><br><span class="line">  children: [</span><br><span class="line">    Expanded(</span><br><span class="line">      flex: 1, // 占1/3高度</span><br><span class="line">      child: Container(color: Colors.red),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      flex: 2, // 占2/3高度</span><br><span class="line">      child: Container(color: Colors.blue),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-c2b3f0670fcb1fef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Flex"></p>
<h2 id="11-ListBody"><a href="#11-ListBody" class="headerlink" title="11. ListBody"></a>11. ListBody</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 是一个沿指定轴方向顺序排列子组件的布局控件，其核心特性是不限制主轴空间，需配合父容器约束使用</p>
</li>
<li><p><strong>规则：</strong> 必须嵌套在ListView、Column等有界容器内，子组件在交叉轴（如水平方向）自动拉伸，无需额外设置，ListBody仅负责线性排列，不包含滚动机制，ListView &#x3D; ListBody + 滚动功能，适合长列表</p>
</li>
<li><p><strong>注意：</strong> 子项数量动态或可能超出屏幕时，必须用ListView替代，避免布局溢出，子组件尺寸变化会触发整个ListBody重新布局，影响性能，对动态子项优先使用ListView.builder ，仅构建可见区域组件</p>
</li>
<li><p><strong>推荐：</strong> 固定数量子项的线性排列（如静态菜单栏、卡片组），需父容器明确尺寸约束（如SizedBox、ConstrainedBox）</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SingleChildScrollView(</span><br><span class="line">  // 提供滚动支持</span><br><span class="line">  child: ListBody(</span><br><span class="line">    mainAxis: Axis.vertical,</span><br><span class="line">    reverse: false,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Container(height: 100, color: Colors.blue[50]),</span><br><span class="line">      Container(height: 100, color: Colors.blue[100]),</span><br><span class="line">      Container(height: 100, color: Colors.blue[200]),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-d9eb3bba462142d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ListBody"></p>
<h1 id="单子组件布局控件"><a href="#单子组件布局控件" class="headerlink" title="单子组件布局控件"></a>单子组件布局控件</h1><h2 id="1-Container"><a href="#1-Container" class="headerlink" title="1. Container"></a>1. Container</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 最常用的布局 Widget，可以包含一个子Widget，并可以设置 padding、margin、边框、背景等</p>
</li>
<li><p><strong>规则：</strong> 如果没有子 Widget，Container 会尽可能大；如果有子 Widget，则根据子 Widget 和自身约束调整大小</p>
</li>
<li><p><strong>注意：</strong> 在没有约束的情况下，Container会尽可能大（比如占满整个屏幕）；在有约束的情况下（如父Widget是Column），Container如果没有子Widget，则会收缩到没有大小</p>
</li>
<li><p><strong>推荐：</strong> 作为其他Widget的容器，用于装饰或设置间距</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  padding: const EdgeInsets.all(8.0),</span><br><span class="line">  margin: const EdgeInsets.all(16.0),</span><br><span class="line">  decoration: BoxDecoration(</span><br><span class="line">    color: Colors.blue,</span><br><span class="line">    borderRadius: BorderRadius.circular(8.0),</span><br><span class="line">  ),</span><br><span class="line">  child: const Text(&#x27;Hello World&#x27;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-419c86fa35335118.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Container页面"></p>
<h2 id="2-Padding"><a href="#2-Padding" class="headerlink" title="2. Padding"></a>2. Padding</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 给子Widget设置内边距</p>
</li>
<li><p><strong>规则：</strong> 只有一个子Widget</p>
</li>
<li><p><strong>注意：</strong> 与Container的padding不同，Padding是一个独立的Widget</p>
</li>
<li><p><strong>推荐：</strong> 当需要内边距但不需要Container的其他装饰时使用</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  decoration: BoxDecoration(</span><br><span class="line">    color: Colors.blue,</span><br><span class="line">    borderRadius: BorderRadius.circular(12),</span><br><span class="line">  ),</span><br><span class="line">  child: const Padding(</span><br><span class="line">    padding: EdgeInsets.symmetric(horizontal: 24, vertical: 16),</span><br><span class="line">    child: Text(</span><br><span class="line">      &quot;Flutter Padding 背景颜色示例&quot;,</span><br><span class="line">      style: TextStyle(color: Colors.white),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-7fcd47aa694b5566.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Padding"></p>
<h2 id="3-Align"><a href="#3-Align" class="headerlink" title="3. Align"></a>3. Align</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 控制子Widget在父Widget中的对齐方式</p>
</li>
<li><p><strong>规则：</strong> 通过alignment属性设置对齐方式（如Alignment.center）</p>
</li>
<li><p><strong>注意：</strong> 如果父Widget没有约束，Align会尽可能大；如果有约束，则根据约束调整大小，并将子Widget对齐</p>
</li>
<li><p><strong>推荐：</strong> 用于精确控制子Widget的位置</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  height: 200,</span><br><span class="line">  width: 200,</span><br><span class="line">  color: Colors.grey,</span><br><span class="line">  child: Align(</span><br><span class="line">    alignment: Alignment.bottomRight,</span><br><span class="line">    child: Container(width: 50, height: 50, color: Colors.red),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-8ee9f7561ef7216b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Align"></p>
<h2 id="4-Center"><a href="#4-Center" class="headerlink" title="4. Center"></a>4. Center</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于将子组件在父组件中水平和垂直居中显示（是Align(alignment: Alignment.center)的简写），Center 组件继承自 Align，因此它本质上是一个简化版的 Align，专门用于居中布局</p>
</li>
<li><p><strong>规则：</strong> 如果 Center 没有子组件且父容器提供无界约束（unbounded），则 Center 会尽可能缩小自身尺寸，如果父容器提供有界约束（bounded），则 Center 会扩展到父容器的大小。有子组件时，Center 的尺寸会根据子组件的大小和父容器的约束动态调整。<br>如果设置了 widthFactor 或 heightFactor，子组件的尺寸会按比例缩放（例如 widthFactor: 2 会使子组件宽度翻倍）</p>
</li>
<li><p><strong>注意：</strong> widthFactor 和 heightFactor用于调整子组件的宽度和高度比例，避免嵌套过多层级，如果父容器限制了尺寸（如 <code>SizedBox</code>），需确保 <code>Center</code> 的子组件尺寸在约束范围内</p>
</li>
<li><p><strong>推荐：</strong> 快速居中单个组件，与复杂布局结合，响应式布局</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Container(</span><br><span class="line">    width: 200,</span><br><span class="line">    height: 100,</span><br><span class="line">    color: Colors.blue,</span><br><span class="line">    child: const Text(</span><br><span class="line">      &quot;居中内容&quot;,</span><br><span class="line">      style: TextStyle(color: Colors.white),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-40e2db3a630d7d19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Center"></p>
<h2 id="5-AspectRatio"><a href="#5-AspectRatio" class="headerlink" title="5. AspectRatio"></a>5. AspectRatio</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 强制子Widget保持指定的宽高比</p>
</li>
<li><p><strong>规则：</strong> 需要设置aspectRatio属性（宽&#x2F;高）</p>
</li>
<li><p><strong>注意：</strong> 父Widget必须提供约束，否则无法计算</p>
</li>
<li><p><strong>推荐：</strong> 用于需要固定宽高比的场景，如播放器</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AspectRatio(</span><br><span class="line">  aspectRatio: 16 / 9,</span><br><span class="line">  child: Container(color: Colors.blue),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-7410e57ee840cd9c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AspectRatio"></p>
<h2 id="6-ConstrainedBox"><a href="#6-ConstrainedBox" class="headerlink" title="6. ConstrainedBox"></a>6. ConstrainedBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 对子Widget施加额外的约束（BoxConstraints）</p>
</li>
<li><p><strong>规则：</strong> 可以设置最小、最大宽高</p>
</li>
<li><p><strong>注意：</strong> 如果子Widget本身有约束，可能会冲突，此时以更紧的约束为准</p>
</li>
<li><p><strong>推荐：</strong> 用于需要限制子Widget大小的情况</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ConstrainedBox(</span><br><span class="line">  constraints: const BoxConstraints(</span><br><span class="line">    minWidth: 100,</span><br><span class="line">    maxWidth: 200,</span><br><span class="line">    minHeight: 50,</span><br><span class="line">    maxHeight: 100,</span><br><span class="line">  ),</span><br><span class="line">  child: Container(color: Colors.red),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-5858d221ad0961c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ConstrainedBox"></p>
<h2 id="7-UnconstrainedBox"><a href="#7-UnconstrainedBox" class="headerlink" title="7. UnconstrainedBox"></a>7. UnconstrainedBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 解除父容器的约束，允许子控件按照自身大小绘制，然后根据实际大小再约束</p>
</li>
<li><p><strong>规则：</strong> 子组件，其尺寸不会受到UnconstrainedBox的约束，若子组件尺寸超过父容器区域，Debug模式下会显示黄色溢出警告（Release模式会裁剪），若父级有多个约束组件（如嵌套的ConstrainedBox），UnconstrainedBox只能突破直接父级的约束，无法突破更高层约束</p>
</li>
<li><p><strong>注意：</strong> constrainedAxis：null（默认）：完全解除约束 &#x2F; Axis.horizontal ：仅水平方向解除约束，垂直方向仍受父级限制 &#x2F; Axis.vertical ：仅垂直方向解除约束，水平方向受限制，过度使用可能导致布局计算复杂化，建议仅在必要时使用</p>
</li>
<li><p><strong>推荐：</strong> 适用于需要突破父容器约束的场景，例如在ListView或AppBar中保持子组件原始尺寸</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ListView(</span><br><span class="line">  children: [</span><br><span class="line">    // 原始Container被拉伸至屏幕宽度 </span><br><span class="line">    Container(width: 200, height: 100, color: Colors.red), </span><br><span class="line">    </span><br><span class="line">    // 使用UnconstrainedBox保持原始尺寸</span><br><span class="line">    UnconstrainedBox(</span><br><span class="line">      child: Container(width: 200, height: 100, color: Colors.blue), </span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-ffe0106484ea43f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="UnconstrainedBox"></p>
<h2 id="8-SizedBox"><a href="#8-SizedBox" class="headerlink" title="8. SizedBox"></a>8. SizedBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 可以指定固定大小的盒子，也可以用于设置间隔</p>
</li>
<li><p><strong>规则：</strong> 如果指定了width和height，则强制子Widget使用该大小（如果子Widget有约束，则可能会强制调整）</p>
</li>
</ul>
</blockquote>
<ol>
<li>SizedBox.shrink()	零尺寸占位符</li>
<li>SizedBox.expand()	扩展填充占位符</li>
<li>SizedBox.fromSize()	指定尺寸占位符<blockquote>
<ul>
<li><p><strong>注意：</strong> 当没有子Widget时，SizedBox会占据指定大小的空间；有子Widget时，则强制子Widget大小为指定大小</p>
</li>
<li><p><strong>推荐：</strong> 用于固定尺寸的盒子或间隔（如SizedBox(width: 10)）</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SizedBox(</span><br><span class="line">  width: 100,</span><br><span class="line">  height: 100,</span><br><span class="line">  child: Container(color: Colors.green),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-e740fea4b1386c95.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SizedBox"></p>
<h2 id="9-FractionallySizedBox"><a href="#9-FractionallySizedBox" class="headerlink" title="9. FractionallySizedBox"></a>9. FractionallySizedBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 子Widget的大小相对于父Widget的百分比</p>
</li>
<li><p><strong>规则：</strong> 需要设置widthFactor和heightFactor（0.0到1.0）</p>
</li>
<li><p><strong>注意：</strong> 父Widget必须提供约束，否则无法计算百分比</p>
</li>
<li><p><strong>推荐：</strong> 用于需要相对父容器百分比大小的场景</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  width: 200,</span><br><span class="line">  height: 200,</span><br><span class="line">  color: Colors.blue,</span><br><span class="line">  child: FractionallySizedBox(</span><br><span class="line">    widthFactor: 0.5,</span><br><span class="line">    heightFactor: 0.5,</span><br><span class="line">    child: Container(color: Colors.red),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-b0f9ae5d677c6ee7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FractionallySizedBox"></p>
<h2 id="10-Transform"><a href="#10-Transform" class="headerlink" title="10. Transform"></a>10. Transform</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 对子Widget进行矩阵变换（平移、旋转、缩放等）</p>
</li>
<li><p><strong>规则：</strong> 变换不影响布局，变换是在布局之后进行的，所以可能会超出父Widget区域</p>
</li>
<li><p><strong>注意：</strong> 变换后可能会超出父Widget范围，导致被裁剪（可以使用Clip.none避免）</p>
</li>
<li><p><strong>推荐：</strong> 用于需要变换的场景，如旋转一个图标</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Transform.rotate(</span><br><span class="line">  angle: 3.14 / 4, // 45度</span><br><span class="line">  child: Container(width: 100, height: 100, color: Colors.blue),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-d10cddf8801e61d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Transform"></p>
<h2 id="11-Baseline"><a href="#11-Baseline" class="headerlink" title="11. Baseline"></a>11. Baseline</h2><blockquote>
<ul>
<li><strong>说明：</strong> 根据子Widget的基线对齐（常用于文本）, Baseline 的对齐方式有两种类型:</li>
</ul>
<p> <strong>alphabetic：</strong> 对齐字母底部基线（适用于英文等拉丁文字）</p>
<p> <strong>ideographic：</strong> 对齐表意文字基线（适用于中文、日文等）</p>
<ul>
<li><p><strong>规则：</strong> 需要设置baseline和baselineType（如TextBaseline.alphabetic）</p>
</li>
<li><p><strong>注意：</strong> 需要子Widget有基线（如Text），否则无效</p>
</li>
<li><p><strong>推荐：</strong> 尤其适用于文字排版场景，处理混合文字（如中英文）时，通过baselineType区分基线类型，避免排版错乱</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const Row(</span><br><span class="line">  children: [</span><br><span class="line">    Baseline(</span><br><span class="line">      baseline: 50.0,</span><br><span class="line">      baselineType: TextBaseline.alphabetic,</span><br><span class="line">      child: Text(&#x27;Hello&#x27;, style: TextStyle(fontSize: 20)),</span><br><span class="line">    ),</span><br><span class="line">    Baseline(</span><br><span class="line">      baseline: 50.0,</span><br><span class="line">      baselineType: TextBaseline.alphabetic,</span><br><span class="line">      child: Text(&#x27;World&#x27;, style: TextStyle(fontSize: 30)),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-cb638ee25dbc7368.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Baseline"></p>
<h2 id="12-FittedBox"><a href="#12-FittedBox" class="headerlink" title="12. FittedBox"></a>12. FittedBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 对子Widget进行缩放和位置调整，以使其适应可用空间</p>
</li>
<li><p><strong>规则：</strong> 通过fit属性设置适应方式（如BoxFit.contain）</p>
</li>
<li><p><strong>注意：</strong> 如果子Widget没有约束，可能会出现问题</p>
</li>
<li><p><strong>推荐：</strong> 用于需要缩放的场景，如保持图片比例并适应容器</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  width: 200,</span><br><span class="line">  height: 100,</span><br><span class="line">  color: Colors.amber,</span><br><span class="line">  child: FittedBox(</span><br><span class="line">    fit: BoxFit.contain,</span><br><span class="line">    child: Image.network(</span><br><span class="line">        &#x27;https://upload-images.jianshu.io/upload_images/1976231-cb638ee25dbc7368.png&#x27;),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-cba023ab829a3898.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FittedBox"></p>
<h2 id="13-OverflowBox"><a href="#13-OverflowBox" class="headerlink" title="13. OverflowBox"></a>13. OverflowBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 允许子Widget超出父Widget的约束，从而在父容器之外显示</p>
</li>
<li><p><strong>规则：</strong> 设置自己的约束，子Widget可以突破父Widget的约束</p>
</li>
<li><p><strong>注意：</strong> 可能导致布局溢出（无警告），使用时需注意</p>
</li>
<li><p><strong>推荐：</strong> 在需要突破约束时使用，但需谨慎</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  color: Colors.green,</span><br><span class="line">  width: 200.0,</span><br><span class="line">  height: 200.0,</span><br><span class="line">  padding: const EdgeInsets.all(50.0),</span><br><span class="line">  child: OverflowBox(</span><br><span class="line">    alignment: Alignment.topLeft,</span><br><span class="line">    maxWidth: 400.0,</span><br><span class="line">    maxHeight: 400.0,</span><br><span class="line">    child: Container(</span><br><span class="line">      color: Colors.blueGrey,</span><br><span class="line">      width: 300.0,</span><br><span class="line">      height: 300.0,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-91814fc4a7d45d92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="OverflowBox"></p>
<h2 id="14-LimitedBox"><a href="#14-LimitedBox" class="headerlink" title="14. LimitedBox"></a>14. LimitedBox</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 一个用于限制子组件最大尺寸的布局组件，当父Widget没有约束时，限制子Widget的最大宽高</p>
</li>
<li><p><strong>规则：</strong> 在无约束时生效（如在ListView中，ListView沿着主轴方向有约束，但交叉轴方向无约束，此时在交叉轴方向使用LimitedBox可以限制最大宽高）</p>
</li>
<li><p><strong>注意：</strong> 在父Widget有约束时无效</p>
</li>
<li><p><strong>推荐：</strong> 在ListView中限制交叉轴方向的大小</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">  children: [</span><br><span class="line">    Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: 100.0,</span><br><span class="line">    ),</span><br><span class="line">    LimitedBox(</span><br><span class="line">      maxWidth: 150.0,</span><br><span class="line">      maxHeight: 150.0,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.lightGreen,</span><br><span class="line">        width: 250.0,</span><br><span class="line">        height: 250.0,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-d1f241904b33084f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="LimitedBox"></p>
<h2 id="15-IntrinsicWidth-x2F-IntrinsicHeight"><a href="#15-IntrinsicWidth-x2F-IntrinsicHeight" class="headerlink" title="15. IntrinsicWidth&#x2F;IntrinsicHeight"></a>15. IntrinsicWidth&#x2F;IntrinsicHeight</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 调整子Widget到其内部内容的高度或宽度（有性能问题，慎用）</p>
</li>
<li><p><strong>规则：</strong> 迫使子Widget计算其内部内容的最大高度或宽度，并调整其他子Widget到相同高度或宽度</p>
</li>
<li><p><strong>注意：</strong> 性能差，因为需要遍历子Widget两次（一次测量，一次布局）</p>
</li>
<li><p><strong>推荐：</strong> 尽量避免使用，寻找其他布局方式替代。如果必须使用，注意性能影响</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.start,</span><br><span class="line">  children: [</span><br><span class="line">    IntrinsicWidth(</span><br><span class="line">      stepWidth: 100,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">        child: Center(</span><br><span class="line">          child: Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: 50,</span><br><span class="line">            height: 50,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-c8063e592d34fd20.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IntrinsicWidth"></p>
<h2 id="16-CustomSingleChildLayout-x2F-CustomMultiChildLayout"><a href="#16-CustomSingleChildLayout-x2F-CustomMultiChildLayout" class="headerlink" title="16. CustomSingleChildLayout&#x2F;CustomMultiChildLayout"></a>16. CustomSingleChildLayout&#x2F;CustomMultiChildLayout</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 使用自定义的布局代理进行布局，可以实现复杂的布局效果，<strong>CustomSingleChildLayout</strong> 是一个用于控制单个子组件布局的组件，<strong>CustomMultiChildLayout</strong> 是一个用于控制多个子组件布局的组件</p>
</li>
<li><p><strong>规则：</strong> 需要自定义LayoutDelegate，SingleChildLayoutDelegate 来实现布局逻辑。该组件适用于需要对单个子组件进行复杂或非常规布局的场景，例如需要精确控制子组件的位置或尺寸时，MultiChildLayoutDelegate 来实现布局逻辑，适用于需要对多个子组件进行复杂布局的场景</p>
</li>
<li><p><strong>注意：</strong> 相对复杂，需要自己实现布局逻辑</p>
</li>
<li><p><strong>推荐：</strong>当其他布局Widget无法满足需求时使用，自定义的网格布局、层叠布局</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">CustomSingleChildLayout(</span><br><span class="line">  delegate: _MyDelegate(),</span><br><span class="line">  child: Container(color: Colors.blue), </span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line">class _MyDelegate extends SingleChildLayoutDelegate &#123;</span><br><span class="line">  @override</span><br><span class="line">  BoxConstraints getConstraintsForChild(BoxConstraints constraints) &#123;</span><br><span class="line">    return constraints.loosen();  // 解除子组件约束 </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @override</span><br><span class="line">  Offset getPositionForChild(Size size, Size childSize) &#123;</span><br><span class="line">    return Offset(size.width/2,  0); // 顶部居中</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @override</span><br><span class="line">  bool shouldRelayout(covariant SingleChildLayoutDelegate oldDelegate) &#123;</span><br><span class="line">    // TODO: implement shouldRelayout</span><br><span class="line">    throw UnimplementedError();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-c723cf1e5f55eb82.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="CustomSingleChildLayout"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  width: 200.0,</span><br><span class="line">  height: 100.0,</span><br><span class="line">  color: Colors.yellow,</span><br><span class="line">  child: CustomMultiChildLayout(</span><br><span class="line">    delegate: TestLayoutDelegate(),</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      LayoutId(</span><br><span class="line">        id: TestLayoutDelegate.title,</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.red,</span><br><span class="line">          child: const Text(&#x27;Title&#x27;),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      LayoutId(</span><br><span class="line">        id: TestLayoutDelegate.description,</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.green,</span><br><span class="line">          child: const Text(&#x27;Description&#x27;),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">class TestLayoutDelegate extends MultiChildLayoutDelegate &#123;</span><br><span class="line">  static const String title = &#x27;title&#x27;;</span><br><span class="line">  static const String description = &#x27;description&#x27;;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void performLayout(Size size) &#123;</span><br><span class="line">    final BoxConstraints constraints = BoxConstraints(maxWidth: size.width);</span><br><span class="line">    final Size titleSize = layoutChild(title, constraints);</span><br><span class="line">    positionChild(title, const Offset(0.0, 0.0));</span><br><span class="line">    final double descriptionY = titleSize.height;</span><br><span class="line">    layoutChild(description, constraints);</span><br><span class="line">    positionChild(description, Offset(0.0, descriptionY));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldRelayout(TestLayoutDelegate oldDelegate) =&gt; false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-697fa21cb3fbdfa3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="CustomMultiChildLayout"></p>
<h2 id="17-Placeholder"><a href="#17-Placeholder" class="headerlink" title="17. Placeholder"></a>17. Placeholder</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 主要用于在开发过程中快速构建页面骨架，加速页面流程的运行。它可以在布局中占位，帮助开发者快速预览页面结构。Placeholder 的大小默认适合其容器，若位于无界空间（unbounded space），则根据 fallbackWidth 和 fallbackHeight 调整大小。Placeholder 支持自定义颜色、线条宽度、fallbackHeight 和 fallbackWidth</p>
</li>
<li><p><strong>规则：</strong> 可以在 Row 或 Column 中使用 Placeholder，但需要通过 fallbackHeight 和 fallbackWidth 限定大小，在无界空间中，可以使用 fallbackWidth 和 fallbackHeight 来限定占位符的大小</p>
</li>
<li><p><strong>注意：</strong> 虽然 Placeholder 是一个简单的占位符，但在复杂的布局中过多使用可能会影响性能，因此应合理使用</p>
</li>
<li><p><strong>推荐：</strong> 在页面开发初期，可以使用 Placeholder 来快速构建页面骨架，帮助开发者快速预览页面结构</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">const Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      SizedBox(</span><br><span class="line">        height: 100,</span><br><span class="line">        child: Row(</span><br><span class="line">          children: [</span><br><span class="line">            Placeholder(</span><br><span class="line">              fallbackWidth: 100,</span><br><span class="line">              color: Colors.green,</span><br><span class="line">              strokeWidth: 10,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      SizedBox(</span><br><span class="line">        width: 100,</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Placeholder(</span><br><span class="line">              fallbackHeight: 100,</span><br><span class="line">              color: Colors.green,</span><br><span class="line">              strokeWidth: 10,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-6ada42602ae47cb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Placeholder"></p>
<h1 id="弹性布局辅助控件"><a href="#弹性布局辅助控件" class="headerlink" title="弹性布局辅助控件"></a>弹性布局辅助控件</h1><h2 id="1-Expanded"><a href="#1-Expanded" class="headerlink" title="1. Expanded"></a>1. Expanded</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 作为Row、Column或Flex的子Widget，可以扩展以填充主轴上的可用空间</p>
</li>
<li><p><strong>规则：</strong> 必须位于Row、Column或Flex内。flex参数用于分配剩余空间的比例（默认为1）</p>
</li>
<li><p><strong>注意：</strong> 在Row或Column中，如果子Widget的总主轴长度超过可用空间，使用Expanded可以避免溢出，因为它会压缩子Widget（强制子Widget适应分配的空间）</p>
</li>
<li><p><strong>推荐：</strong> 在需要子Widget按比例分配空间时使用，比例分割布局（如 70%-30% 面板）</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">  children: [</span><br><span class="line">    Expanded(flex: 2, child: Container(color: Colors.red)), // 占2/3空间</span><br><span class="line">    Expanded(flex: 1, child: Container(color: Colors.green)), // 占1/3空间</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-96eab57e36b14c38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Expanded"></p>
<h2 id="2-Flexible"><a href="#2-Flexible" class="headerlink" title="2. Flexible"></a>2. Flexible</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 与Expanded类似，但更灵活。Expanded是Flexible(fit: FlexFit.tight)的简写。Flexible的默认fit是FlexFit.loose，即子Widget不需要填满分配的空间</p>
</li>
<li><p><strong>规则：</strong> 同样必须位于Row、Column或Flex内</p>
</li>
<li><p><strong>注意：</strong> Flexible与Expanded的区别：Expanded会强制子Widget填满空间，而Flexible则允许子Widget使用更小的空间</p>
</li>
<li><p><strong>推荐：</strong> 当需要子Widget有弹性但不需要强制填满时使用，自适应表格列</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">  children: [</span><br><span class="line">    Flexible(</span><br><span class="line">      child: Container(height: 50, color: Colors.red),</span><br><span class="line">    ),</span><br><span class="line">    </span><br><span class="line">    Flexible(</span><br><span class="line">      child: Container(</span><br><span class="line">          height: 100,</span><br><span class="line">          color: Colors</span><br><span class="line">              .green), // 这个容器高度100，但Row高度由最高子Widget决定（100），红色容器高度50，但会被拉伸到100（因为Row交叉轴是垂直方向，默认是stretch）</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><code>注意：Row的交叉轴对齐默认是stretch，所以子Widget在垂直方向会被拉伸。如果不想被拉伸，可以设置crossAxisAlignment: CrossAxisAlignment.start。</code></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1976231-9f0780f4fe1947a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Flexible"></p>
<h2 id="3-Spacer"><a href="#3-Spacer" class="headerlink" title="3. Spacer"></a>3. Spacer</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 在弹性布局中占据剩余空间（相当于<code>Expanded</code>包裹一个空的<code>SizedBox</code>）,是一个用于在 Row、Column 或 Flex 布局中填充剩余空间的空白组件</p>
</li>
<li><p><strong>规则：</strong> 它会根据 flex 参数按比例占据主轴（水平或垂直方向）的可用空间，类似弹性布局中的“弹簧”，flex（默认值为1）：指定空间分配比例。例如，两个 Spacer(flex: 2) 和 Spacer(flex: 1) 会按 2:1 分配剩余空间</p>
</li>
<li><p><strong>注意：</strong> 必须作为 Row、Column 或 Flex 的直接子组件，空间不足时可能引发溢出错误（需确保父容器有足够空间）</p>
</li>
<li><p><strong>推荐：</strong> 等间距按钮组，左右对齐元素，多比例空间分配</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  children: [</span><br><span class="line">    const Text(</span><br><span class="line">      &quot;顶部标题&quot;,</span><br><span class="line">      style: TextStyle(</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    const Spacer(flex: 1),</span><br><span class="line">    const Row(</span><br><span class="line">      children: [</span><br><span class="line">        Text(</span><br><span class="line">          &quot;左侧文本&quot;,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Spacer(flex: 2),</span><br><span class="line">        Text(&quot;中间文本&quot;,</span><br><span class="line">            style: TextStyle(</span><br><span class="line">              color: Colors.red,</span><br><span class="line">            )),</span><br><span class="line">        Spacer(flex: 1),</span><br><span class="line">        Icon(Icons.star),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    const Spacer(flex: 3), // 下方大面积留白</span><br><span class="line">    ElevatedButton(</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">      child: const Text(</span><br><span class="line">        &quot;确认&quot;,</span><br><span class="line">        style: TextStyle(</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-252bd90059c6ef74.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Spacer"></p>
<h1 id="层叠布局辅助控件"><a href="#层叠布局辅助控件" class="headerlink" title="层叠布局辅助控件"></a>层叠布局辅助控件</h1><h2 id="1-Positioned"><a href="#1-Positioned" class="headerlink" title="1. Positioned"></a>1. Positioned</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 仅作为 Stack 的直接子组件使用，用于在层叠布局中精确定位子组件，类似 CSS 的绝对定位</p>
</li>
<li><p><strong>规则：</strong> left、right、top、bottom（控制子组件相对于父 Stack 边缘的距离），width、height（可选，用于固定子组件尺寸），支持 Positioned(topLeft&#x2F;bottomRight) 等快捷方式</p>
</li>
<li><p><strong>注意：</strong> 若设置 left + right，则不能同时设置 width；同理适用于 top + bottom 与 height 的冲突，未设置尺寸时，需至少指定两个相对定位属性（如 left 和 right）以确定布局范围</p>
</li>
<li><p><strong>推荐：</strong> 结合 MediaQuery 动态计算定位值，适配不同屏幕尺寸，使用 Align 简化对齐逻辑</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Stack(</span><br><span class="line">  fit: StackFit.expand, // 填充父容器</span><br><span class="line">  children: [</span><br><span class="line">    Positioned(</span><br><span class="line">      left: 10,</span><br><span class="line">      right: 10,</span><br><span class="line">      height: 80,</span><br><span class="line">      child: Container(color: Colors.orange), // 水平居中且宽度自适应</span><br><span class="line">    ),</span><br><span class="line">    Positioned(</span><br><span class="line">      top: 10,</span><br><span class="line">      bottom: 10,</span><br><span class="line">      width: 80,</span><br><span class="line">      child: Container(color: Colors.purple), // 垂直居中且高度自适应</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-676bbb12f2ea47dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Positioned"></p>
<h2 id="2-PositionedDirectional"><a href="#2-PositionedDirectional" class="headerlink" title="2. PositionedDirectional"></a>2. PositionedDirectional</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 它用于在 Stack 中根据 textDirection 的方向来定位子部件。与 Positioned 不同，PositionedDirectional 接受的是一个偏移量和一个 textDirection 参数，从而决定子部件相对 Stack 的位置。这使得在布局中使用 PositionedDirectional 更加灵活和方便</p>
</li>
<li><p><strong>规则：</strong> start：在 TextDirection.ltr （从左到右）时对应 left，在 TextDirection.rtl （从右到左）时对应 right。end：在 TextDirection.ltr 时对应 right，在 TextDirection.rtl 时对应 left。top 和 bottom 保持固定方向，不受文本方向影响</p>
</li>
<li><p><strong>注意：</strong> 必须作为 Stack 的直接子组件，否则会抛出错误，支持 width 和 height 属性，但需注意与 start&#x2F;end 和 top&#x2F;bottom 的组合规则</p>
</li>
<li><p><strong>推荐：</strong> 可通过 AnimatedPositionedDirectional 实现位置变化的动画效果，适配不同语言方向的布局（如阿拉伯语、希伯来语）</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Directionality(</span><br><span class="line">  // 设置文本方向（ltr 或 rtl）</span><br><span class="line">  textDirection: TextDirection.rtl,</span><br><span class="line">  child: Stack(</span><br><span class="line">    children: [</span><br><span class="line">      PositionedDirectional(</span><br><span class="line">        start: 20.0, // 在 rtl 环境下对应 right=20</span><br><span class="line">        top: 50.0,</span><br><span class="line">        child: Container(</span><br><span class="line">          width: 100,</span><br><span class="line">          height: 100,</span><br><span class="line">          color: Colors.blue,</span><br><span class="line">          child: const Center(child: Text(&#x27;动态定位&#x27;)),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      // 其他子组件...</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-1fa3d07137ff4111.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PositionedDirectional"></p>
<h1 id="滚动布局相关控件"><a href="#滚动布局相关控件" class="headerlink" title="滚动布局相关控件"></a>滚动布局相关控件</h1><h2 id="1-SingleChildScrollView"><a href="#1-SingleChildScrollView" class="headerlink" title="1. SingleChildScrollView"></a>1. SingleChildScrollView</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 为单个子控件添加滚动功能，支持垂直或水平滚动，类似于 Android 中的 ScrollView 或 iOS 中的 UIScrollView</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<ol>
<li><strong>scrollDirection：</strong> 滚动方向，默认为垂直方向（Axis.vertical）。</li>
<li><strong>reverse：</strong> 是否反转滚动方向，默认为 false。</li>
<li><strong>padding：</strong> 子组件的内边距。</li>
<li><strong>primary：</strong> 是否为主滚动视图，用于判断是否自动生成控制器。</li>
<li><strong>physics：</strong> 控制滚动行为，如滑动速度和边缘效应。</li>
<li><strong>controller：</strong> 用于控制滚动位置的对象。</li>
<li><strong>child：</strong> 要包含在 SingleChildScrollView 中的子组件。</li>
<li><strong>dragStartBehavior：</strong> 拖动开始行为，默认为 DragStartBehavior.start。</li>
<li><strong>clipBehavior：</strong> 裁剪行为，默认为 Clip.hardEdge。</li>
<li><strong>restorationId：</strong> 恢复标识。</li>
<li><strong>keyboardDismissBehavior：</strong> 键盘关闭行为，默认为<br>ScrollViewKeyboardDismissBehavior.manual。<blockquote>
<ul>
<li><p><strong>注意：</strong> 不支持 Sliver 延迟加载，内容过多时性能较差，建议改用 ListView，适用于内容不会超过屏幕尺寸太多的情况，因为当内容超出屏幕尺寸较多时，性能会受到影响</p>
</li>
<li><p><strong>推荐：</strong> 单个子组件的滚动（如表单、文章详情页），内容量较小，无需动态加载的场景</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Scrollbar(</span><br><span class="line">  child: SingleChildScrollView(</span><br><span class="line">    scrollDirection: Axis.vertical,</span><br><span class="line">    child: Center(</span><br><span class="line">      child: Column(</span><br><span class="line">        children: &#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span><br><span class="line">            .split(&#x27;&#x27;)</span><br><span class="line">            .map((c) =&gt; Container(</span><br><span class="line">                  margin: const EdgeInsets.all(8.0),</span><br><span class="line">                  padding: const EdgeInsets.all(16.0),</span><br><span class="line">                  decoration: BoxDecoration(</span><br><span class="line">                    color: Colors.red,</span><br><span class="line">                    borderRadius: BorderRadius.circular(8.0),</span><br><span class="line">                    boxShadow: [</span><br><span class="line">                      BoxShadow(</span><br><span class="line">                        color: Colors.black.withOpacity(0.5),</span><br><span class="line">                        blurRadius: 4.0,</span><br><span class="line">                        offset: const Offset(2.0, 2.0),</span><br><span class="line">                      ),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                  child: Text(</span><br><span class="line">                    c,</span><br><span class="line">                    style: const TextStyle(</span><br><span class="line">                        color: Colors.white, fontSize: 24.0),</span><br><span class="line">                  ),</span><br><span class="line">                ))</span><br><span class="line">            .toList(),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-49419b2a0ccc31e5.gif?imageMogr2/auto-orient/strip" alt="SingleChildScrollView"></p>
<h2 id="2-PageView"><a href="#2-PageView" class="headerlink" title="2. PageView"></a>2. PageView</h2><blockquote>
<ul>
<li><strong>说明：</strong> 是一个分页滚动视图，用于实现可滑动的页面切换（水平&#x2F;垂直）</li>
</ul>
</blockquote>
<ol>
<li>PageView()：静态页面列表</li>
<li>PageView.builder() ：动态懒加载（大数据量优化）</li>
<li>PageView.custom() ：高度自定义子组件<blockquote>
<ul>
<li><strong>规则：</strong></li>
</ul>
</blockquote>
</li>
<li><strong>scrollDirection：</strong> 视图滚动方向，默认为水平方向（Axis.horizontal）。</li>
<li><strong>reverse：</strong> 是否反转方向，默认为 false。</li>
<li><strong>controller：</strong> 用于监听视图滚动情况的控制器。</li>
<li><strong>onPageChanged：</strong> 索引改变时的回调函数。</li>
<li><strong>physics：</strong> 滚动逻辑，可以设置为不滚动、滚动或滚动到边缘是否反弹等。</li>
<li><strong>pageSnapping：</strong> 是否启用页面对齐，默认为 true。</li>
<li><strong>allowImplicitScrolling：</strong> 是否允许隐式滚动，默认为 false。<blockquote>
<ul>
<li><p><strong>注意：</strong> 使用 PageView.builder 避免一次性构建所有页面，搭配 AutomaticKeepAliveClientMixin 缓存页面状态，嵌套 ListView 时设置 physics: NeverScrollableScrollPhysics() 禁用父级滑动，避免垂直滑动冲突</p>
</li>
<li><p><strong>推荐：</strong> 适用于引导页、轮播图、全屏滑动视图等场景</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">PageView(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Container(</span><br><span class="line">      alignment: Alignment.center,</span><br><span class="line">      decoration: const BoxDecoration(color: Colors.green),</span><br><span class="line">      child: const Text(&quot;页面 0&quot;,</span><br><span class="line">          style: TextStyle(fontSize: 20, color: Colors.black)),</span><br><span class="line">    ),</span><br><span class="line">    Container(</span><br><span class="line">      alignment: Alignment.center,</span><br><span class="line">      decoration: const BoxDecoration(color: Colors.red),</span><br><span class="line">      child: const Text(&quot;页面 1&quot;,</span><br><span class="line">          style: TextStyle(fontSize: 20, color: Colors.white)),</span><br><span class="line">    ),</span><br><span class="line">    Container(</span><br><span class="line">      alignment: Alignment.center,</span><br><span class="line">      decoration: const BoxDecoration(color: Colors.blue),</span><br><span class="line">      child: const Text(&quot;页面 2&quot;,</span><br><span class="line">          style: TextStyle(fontSize: 20, color: Colors.white)),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-105ffc0ea9ac9933.gif?imageMogr2/auto-orient/strip" alt="PageView"></p>
<h2 id="3-Scrollbar"><a href="#3-Scrollbar" class="headerlink" title="3. Scrollbar"></a>3. Scrollbar</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 一个 Material 风格的滚动指示器，Flutter 的滚动视图（如 ListView、GridView 等）没有滚动条，但可以通过将滚动视图包裹在 Scrollbar 组件中来添加滚动条</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<ol>
<li><strong>child：</strong> 必需属性，用于指定需要滚动的内容。</li>
<li><strong>controller：</strong> 可选属性，用于控制滚动行为。</li>
<li><strong>isAlwaysShown：</strong> 布尔值，表示是否始终显示滚动条。默认为 false，需要设置 controller 才能显示。</li>
<li><strong>thickness：</strong> 滚动条的宽度。</li>
<li><strong>radius：</strong> 滚动条的圆角半径。</li>
<li><strong>showTrackOnHover：</strong> 布尔值，表示当鼠标悬停在滚动条上时是否显示轨道。</li>
<li><strong>hoverThickness：</strong> 鼠标悬停时滚动条的宽度。</li>
<li><strong>notificationPredicate：</strong> 用于过滤滚动通知的谓词。</li>
<li><strong>interactive：</strong> 布尔值，表示滚动条是否可以交互。</li>
<li><strong>scrollbarOrientation：</strong> 滚动条的方向。<blockquote>
<ul>
<li><p><strong>注意：</strong> Scrollbar 需要包裹可滚动组件（如 ListView），但不要求直接作为父级，只要在组件树中存在即可</p>
</li>
<li><p><strong>推荐：</strong> 自定义滚动条样式 、显示滚动条</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Scrollbar(</span><br><span class="line">  child: ListView.builder(</span><br><span class="line">    itemCount: 40,</span><br><span class="line">    itemBuilder: (context, index) &#123;</span><br><span class="line">      return Card(</span><br><span class="line">        child: Container(</span><br><span class="line">          height: 45,</span><br><span class="line">          alignment: Alignment.center,</span><br><span class="line">          child: Text(&#x27;$index&#x27;),</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-7fb3930b1c3ee34f.gif?imageMogr2/auto-orient/strip" alt="Scrollbar"></p>
<h2 id="4-RefreshIndicator"><a href="#4-RefreshIndicator" class="headerlink" title="4. RefreshIndicator"></a>4. RefreshIndicator</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 实现 Material 风格下拉刷新功能的组件，通常包裹在可滚动的子组件（如 ListView、CustomScrollView）外层。当用户下拉超过一定距离时，会触发回调函数执行刷新操作，并显示加载动画</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<ol>
<li><strong>child：</strong> 必需参数，通常为 ListView 或 CustomScrollView。</li>
<li><strong>displacement：</strong> 可选参数，从子组件的顶部或底部边缘到刷新指示符所在位置的距离。</li>
<li><strong>onRefresh：</strong> 必需参数，当用户将刷新指示器拖到足够远以表明他们希望应用刷新时调用的函数。</li>
<li><strong>color：</strong> 可选参数，进度指示器前景色。</li>
<li><strong>backgroundColor：</strong> 可选参数，进度指示器背景色。</li>
<li><strong>notificationPredicate：</strong> 可选参数，用于过滤滚动通知。</li>
<li><strong>semanticsLabel：</strong> 可选参数，语义标签。</li>
<li><strong>semanticsValue：</strong> 可选参数，语义值。<blockquote>
<ul>
<li><p><strong>注意：</strong> 上拉加载：需结合 <code>ScrollController</code> 监听滚动位置，实现 <code>LoadMore</code> 功能，<code>onRefresh</code> 必须返回 <code>Future</code>，且需在数据加载完成后完成该 <code>Future</code>，否则刷新动画不会停止</p>
</li>
<li><p><strong>推荐：</strong> 列表数据刷新</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; _items = List.generate(20, (index) =&gt; &quot;Item $index&quot;);</span><br><span class="line"></span><br><span class="line">Future&lt;void&gt; _refresh() async &#123;</span><br><span class="line">  await Future.delayed(Duration(seconds: 2));</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    _items = List.generate(20, (index) =&gt; &quot;Refreshed Item $index&quot;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"> RefreshIndicator(</span><br><span class="line">  onRefresh: _refresh,</span><br><span class="line">  child: ListView.builder(</span><br><span class="line">    itemCount: _items.length,</span><br><span class="line">    itemBuilder: (context, index) &#123;</span><br><span class="line">      return ListTile(</span><br><span class="line">        title: Text(_items[index]),</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-4b56b92150f6a399.gif?imageMogr2/auto-orient/strip" alt="RefreshIndicator"></p>
<h2 id="5-DraggableScrollableSheet"><a href="#5-DraggableScrollableSheet" class="headerlink" title="5. DraggableScrollableSheet"></a>5. DraggableScrollableSheet</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 允许用户通过手势操作来拖动一个可滚动的区域。它常用于创建底部弹出式面板或可拖动的控件，类似于高德地图首页从底部滑动向上的效果。该组件继承自 StatefulWidget，通过调整滚动区域的大小来响应拖动手势，直到达到限制，然后开始滚动</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<p><strong>1. initialChildSize：</strong> 设置初始高度占屏幕的比例，范围为 0 到 1，默认为 0.5。</p>
<p><strong>2. minChildSize：</strong> 指定最小高度占屏幕的比例，默认为 0.25。</p>
<p><strong>3. maxChildSize：</strong> 指定最大高度占屏幕的比例，默认为 1.0。</p>
<p><strong>4. expand：</strong> 控制是否允许在内容小于屏幕高度时扩展以填充屏幕，默认为 true。</p>
<p><strong>5. snap：</strong> 布尔值，用于控制滚动停止时是否自动捕捉到接近的最小或最大值，默认为 false。</p>
<p><strong>6. builder：</strong> 构建函数，用于构建 DraggableScrollableSheet 的内容，接受两个参数：<br>BuildContext 和 ScrollController，返回一个 Widget，通常是 SingleChildScrollView 或 ListView。</p>
<blockquote>
<ul>
<li><p><strong>注意：</strong> 确保 maxChildSize &gt;&#x3D; initialChildSize &gt;&#x3D; minChildSize，否则会抛出异常</p>
</li>
<li><p><strong>推荐：</strong> 底部弹出式面板评论区、详细信息展示</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Stack(</span><br><span class="line">  children: [</span><br><span class="line">    Positioned(</span><br><span class="line">      top: 0,</span><br><span class="line">      bottom: 0,</span><br><span class="line">      left: 0,</span><br><span class="line">      right: 0,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.grey[300],</span><br><span class="line">        child: Center(</span><br><span class="line">          child: Text(&#x27;背景内容&#x27;),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    DraggableScrollableSheet(</span><br><span class="line">      initialChildSize: 0.5,</span><br><span class="line">      minChildSize: 0.3,</span><br><span class="line">      maxChildSize: 1.0,</span><br><span class="line">      builder: (_, controller) &#123;</span><br><span class="line">        return Container(</span><br><span class="line">          color: Theme.of(context).cardColor,</span><br><span class="line">          child: Scrollbar(</span><br><span class="line">            child: ListView.builder(</span><br><span class="line">              controller: controller,</span><br><span class="line">              itemCount: 20,</span><br><span class="line">              itemBuilder: (context, index) &#123;</span><br><span class="line">                return ListTile(</span><br><span class="line">                  title: Text(&#x27;Item $index&#x27;),</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-7ea2aba6755849b2.gif?imageMogr2/auto-orient/strip" alt="DraggableScrollableSheet"></p>
<h2 id="6-NestedScrollView"><a href="#6-NestedScrollView" class="headerlink" title="6. NestedScrollView"></a>6. NestedScrollView</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于协调多个独立滚动区域的容器组件。它通过 NestedScrollViewCoordinator 协调两个滚动控制器：外层滚动（Header）和内层滚动（Body）。外层滚动由 headerSliverBuilder 定义的 Sliver 组件组成（如 SliverAppBar），受 PrimaryScrollController 控制；内层滚动由 body 定义的普通滚动组件（如 ListView），拥有独立的 ScrollController</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
<p><strong>1.外层滚动优先：</strong> 当用户向下滑动时，外层滚动先消耗滚动事件，直到外层完全折叠后，内层滚动接管。<br><strong>2.内层反向优先：</strong> 当内层滚动到达顶部且用户继续上滑时，外层滚动会展开</p>
<ul>
<li><p><strong>注意：</strong> 确保内部可滚动组件（body）的 physics 属性设置正确，以避免滚动冲突</p>
</li>
<li><p><strong>推荐：</strong> 折叠头部图片效果</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">NestedScrollView(</span><br><span class="line">          headerSliverBuilder: (BuildContext context, bool innerBoxIsScrolled) &#123;</span><br><span class="line">    return &lt;Widget&gt;[</span><br><span class="line">      SliverAppBar(</span><br><span class="line">        title: const Text(&#x27;NestedScrollView Example&#x27;),</span><br><span class="line">        pinned: true,</span><br><span class="line">        floating: true,</span><br><span class="line">        forceElevated: innerBoxIsScrolled,</span><br><span class="line">        expandedHeight: 160.0,</span><br><span class="line">        flexibleSpace: FlexibleSpaceBar(</span><br><span class="line">          background: Image.network(</span><br><span class="line">            &quot;https://miaobi-lite.bj.bcebos.com/miaobi/5mao/b%275aS05YOPYXBwXzE3MzM3NjcxODMuODQyNDgz%27/0.png&quot;,</span><br><span class="line">            fit: BoxFit.cover,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ];</span><br><span class="line">  &#125;,</span><br><span class="line">  body: ListView.builder(</span><br><span class="line">    itemCount: 50,</span><br><span class="line">    itemBuilder: (BuildContext context, int index) &#123;</span><br><span class="line">      return ListTile(</span><br><span class="line">        title: Text(&#x27;List Item $index&#x27;),</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-52f9c772406edf5f.gif?imageMogr2/auto-orient/strip" alt="NestedScrollView"></p>
<h2 id="7-ScrollConfiguration"><a href="#7-ScrollConfiguration" class="headerlink" title="7. ScrollConfiguration"></a>7. ScrollConfiguration</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于统一控制子组件树的滚动行为（如滚动条样式、拖拽反馈等），尤其适用于定制不同平台的滚动体验</p>
</li>
<li><p><strong>规则：</strong> ScrollConfiguration 应该直接放置在列表组件的父组件下，以避免与其他列表组件发生冲突，若需要全局设置整个应用程序的所有列表默认样式，则可将 ScrollConfiguration 组件插入接近组件树根部的位置</p>
</li>
<li><p><strong>注意：</strong> 由于 ScrollConfiguration 的子组件可能为 null，因此在使用时需要进行 null 检查，以避免潜在的错误</p>
</li>
<li><p><strong>推荐：</strong> 自定义滚动条的样式，如颜色、厚度</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ScrollConfiguration(</span><br><span class="line">  behavior: MyCustomBehavior(),</span><br><span class="line">  child: ListView.separated(</span><br><span class="line">    itemCount: 20,</span><br><span class="line">    separatorBuilder: (_, __) =&gt; Divider(),</span><br><span class="line">    itemBuilder: (_, index) &#123;</span><br><span class="line">      return Container(</span><br><span class="line">        height: 56,</span><br><span class="line">        alignment: Alignment.center,</span><br><span class="line">        child: Text(&quot;这是第 $&#123;index + 1&#125; 项&quot;),</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">class MyCustomBehavior extends ScrollBehavior &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget buildViewportChrome(BuildContext context, Widget child, AxisDirection axisDirection) &#123;</span><br><span class="line">    // 自定义滚动条样式</span><br><span class="line">    return GlowingOverscrollIndicator(</span><br><span class="line">      axisDirection: axisDirection,</span><br><span class="line">      color: Colors.grey, // 设置滚动条颜色为灰色</span><br><span class="line">      child: child,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  ScrollPhysics getScrollPhysics(BuildContext context) &#123;</span><br><span class="line">    // 使用 ClampingScrollPhysics 防止过度滚动</span><br><span class="line">    return ClampingScrollPhysics();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-286ad153ba6dc757.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ScrollConfiguration"></p>
<h1 id="Sliver-系列控件-用于-CustomScrollView"><a href="#Sliver-系列控件-用于-CustomScrollView" class="headerlink" title="Sliver 系列控件 (用于 CustomScrollView)"></a>Sliver 系列控件 (用于 CustomScrollView)</h1><h2 id="1-SliverList"><a href="#1-SliverList" class="headerlink" title="1. SliverList"></a>1. SliverList</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 创建线性可滚动列表的组件，它属于 Sliver 家族的一部分，SliverList 需要与 CustomScrollView 结合使用，以实现复杂的滚动效果</p>
</li>
<li><p><strong>规则：</strong> 使用 SliverChildDelegate 来构建子组件。常用的实现是 SliverChildBuilderDelegate 和 SliverChildListDelegate。SliverChildListDelegate: （静态列表）适用于已知数量的子组件，一次性全部渲染。<br>SliverChildBuilderDelegate: （动态构建列表项）适用于未知数量的子组件，按需加载和销毁列表项，提升性能。</p>
</li>
<li><p><strong>注意：</strong> 必须通过代理生成子项，其核心特点是支持统一滚动、避免滑动冲突</p>
</li>
<li><p><strong>推荐：</strong> 滚动时两个列表无缝衔接，无滑动冲突，实现吸顶 AppBar 和列表联动</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">CustomScrollView(</span><br><span class="line">  slivers: &lt;Widget&gt;[</span><br><span class="line">    const SliverAppBar(</span><br><span class="line">      expandedHeight: 250,</span><br><span class="line">      flexibleSpace: FlexibleSpaceBar(</span><br><span class="line">        title: Text(&#x27;SliverList 示例&#x27;),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    SliverList(</span><br><span class="line">      delegate: SliverChildBuilderDelegate(</span><br><span class="line">        (BuildContext context, int index) &#123;</span><br><span class="line">          return ListTile(</span><br><span class="line">            title: Text(&#x27;Item #$index&#x27;),</span><br><span class="line">          );</span><br><span class="line">        &#125;,</span><br><span class="line">        childCount: 20, // 列表项数目</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    SliverFixedExtentList(</span><br><span class="line">      itemExtent: 50.0,</span><br><span class="line">      delegate: SliverChildBuilderDelegate(</span><br><span class="line">        (BuildContext context, int index) &#123;</span><br><span class="line">          return Container(</span><br><span class="line">            alignment: Alignment.center,</span><br><span class="line">            color: Colors.blue[100 * (index % 9)],</span><br><span class="line">            child: Text(&quot;list item $index&quot;),</span><br><span class="line">          );</span><br><span class="line">        &#125;,</span><br><span class="line">        childCount: 50,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-5a49215fabf128ae.gif?imageMogr2/auto-orient/strip" alt="SliverList"></p>
<h2 id="2-SliverGrid"><a href="#2-SliverGrid" class="headerlink" title="2. SliverGrid"></a>2. SliverGrid</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 创建网格布局的 Sliver 组件，它非常适合与其他 Sliver 组件结合使用，以构建复杂的可滚动布局，</p>
</li>
<li><p><strong>规则：</strong> SliverGrid 需要指定 gridDelegate 和 delegate 属性。gridDelegate 控制网格布局，而 delegate 用于构建每个网格单元的内容，SliverGrid 提供了三种主要的构造方法：1.SliverGrid：适用于动态显示内容（从数据库或 API 获取）。2.SliverGrid.extent：允许指定子项的最大跨轴范围。3.SliverGrid.count：用于指定跨轴上固定数量的子项</p>
</li>
</ul>
</blockquote>
<ol>
<li><strong>delegate：</strong> 控制子项生成，常用：</li>
</ol>
<ul>
<li><strong>SliverChildListDelegate：</strong> 静态子项列表</li>
<li><strong>SliverChildBuilderDelegate：</strong> 动态懒加载子项</li>
</ul>
<ol start="4">
<li><strong>gridDelegate：</strong> 控制网格布局，两种实现：</li>
</ol>
<ul>
<li><strong>SliverGridDelegateWithFixedCrossAxisCount：</strong> 固定列数</li>
<li><strong>SliverGridDelegateWithMaxCrossAxisExtent：</strong> 限制子项最大宽度<blockquote>
<ul>
<li><p><strong>注意：</strong> 按需加载子项，性能优于一次性构建所有子项的 GridView，与普通的网格布局组件（如 GridView）不同，SliverGrid 不会提前渲染所有网格项，而是在滚动时动态渲染当前可见的部分，从而节省内存和渲染时间</p>
</li>
<li><p><strong>推荐：</strong> 下拉刷新、嵌套滚动</p>
</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">CustomScrollView(</span><br><span class="line">  slivers: [</span><br><span class="line">    SliverAppBar(</span><br><span class="line">      // 可折叠标题栏</span><br><span class="line">      expandedHeight: 200,</span><br><span class="line">      flexibleSpace: FlexibleSpaceBar(</span><br><span class="line">          background: Image.network(</span><br><span class="line">              &#x27;https://miaobi-lite.bj.bcebos.com/miaobi/5mao/b%275aS05YOPYXBwXzE3MzM3NjcxODMuODQyNDgz%27/0.png&#x27;,</span><br><span class="line">              fit: BoxFit.cover)),</span><br><span class="line">    ),</span><br><span class="line">    SliverGrid(</span><br><span class="line">      // 网格区域</span><br><span class="line">      delegate: SliverChildBuilderDelegate((ctx, i) =&gt; Container(</span><br><span class="line">            color: [</span><br><span class="line">              Colors.red,</span><br><span class="line">              Colors.blue,</span><br><span class="line">              Colors.black,</span><br><span class="line">              Colors.yellow,</span><br><span class="line">              Colors.green</span><br><span class="line">            ][i % 5],</span><br><span class="line">          )),</span><br><span class="line">      gridDelegate: const SliverGridDelegateWithMaxCrossAxisExtent(</span><br><span class="line">        maxCrossAxisExtent: 150, // 自适应宽度</span><br><span class="line">        mainAxisSpacing: 10,</span><br><span class="line">        crossAxisSpacing: 10,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-3edae1a2e0488831.gif?imageMogr2/auto-orient/strip" alt="SliverGrid"></p>
<h2 id="3-SliverAppBar"><a href="#3-SliverAppBar" class="headerlink" title="3. SliverAppBar"></a>3. SliverAppBar</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 创建可滚动应用栏的组件，它可以在滚动过程中动态变化，如展开、收缩或固定在顶部。SliverAppBar 通常与 CustomScrollView 搭配使用，可以实现复杂的滚动效果，类似于 Android 中的 CollapsingToolbarLayout</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<ol>
<li><strong>expandedHeight：</strong> 指定 SliverAppBar 展开时的高度。</li>
<li><strong>pinned：</strong> 设置为 true 时，AppBar 将在滚动到顶部时固定在屏幕顶部。</li>
<li><strong>floating：</strong> 设置为 true 时，当向下滚动时，AppBar 会重新出现。</li>
<li><strong>snap：</strong> 配合 floating 属性使用，当设置为 true 时，SliverAppBar 会在滑动过程中自动“吸附”到顶部或消失。</li>
<li><strong>flexibleSpace：</strong> 用于定义可伸缩的空间，通常使用 FlexibleSpaceBar。</li>
<li><strong>backgroundColor：</strong> 设置 AppBar 的背景色。</li>
<li><strong>title：</strong> 设置 AppBar 的标题。</li>
<li><strong>leading：</strong> 设置 AppBar 前面显示的一个控件。</li>
<li><strong>actions：</strong> 设置 AppBar 的操作按钮。</li>
<li><strong>bottom：</strong> 设置 AppBar 的底部区域，通常用于添加 TabBar。<blockquote>
<ul>
<li><p><strong>注意：</strong> pinned 和 floating 不可同时为 true，否则引发布局冲突，必须嵌套在 Sliver 容器，避免在 flexibleSpace 中使用复杂动画，可能导致滚动卡顿，如果需要实现滚动折叠效果，flexibleSpace 必须包含 FlexibleSpaceBar</p>
</li>
<li><p><strong>推荐：</strong> 折叠式图片标题、快速展开的搜索栏、带悬浮 Tab 的分页布局</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">DefaultTabController(</span><br><span class="line">  length: 2,</span><br><span class="line">  child: Scaffold(</span><br><span class="line">    body: NestedScrollView(</span><br><span class="line">      headerSliverBuilder:</span><br><span class="line">          (BuildContext context, bool innerBoxIsScrolled) &#123;</span><br><span class="line">        return &lt;Widget&gt;[</span><br><span class="line">          SliverAppBar(</span><br><span class="line">            expandedHeight: 200.0,</span><br><span class="line">            floating: false,</span><br><span class="line">            pinned: true,</span><br><span class="line">            flexibleSpace: FlexibleSpaceBar(</span><br><span class="line">              title: const Text(&#x27;SliverAppBar Example&#x27;),</span><br><span class="line">              background: Image.network(</span><br><span class="line">                &#x27;https://img.win3000.com/m00/76/6a/3fb7a5729f51fedf4261cb02addbd133.jpg&#x27;,</span><br><span class="line">                fit: BoxFit.cover,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            bottom: const TabBar(</span><br><span class="line">              tabs: [</span><br><span class="line">                Tab(icon: Icon(Icons.home), text: &#x27;Home&#x27;),</span><br><span class="line">                Tab(icon: Icon(Icons.settings), text: &#x27;Settings&#x27;),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ];</span><br><span class="line">      &#125;,</span><br><span class="line">      body: TabBarView(</span><br><span class="line">        children: [</span><br><span class="line">          CustomScrollView(</span><br><span class="line">            slivers: [</span><br><span class="line">              SliverList(</span><br><span class="line">                delegate: SliverChildBuilderDelegate(</span><br><span class="line">                  (BuildContext context, int index) &#123;</span><br><span class="line">                    return Container(</span><br><span class="line">                      height: 85,</span><br><span class="line">                      alignment: Alignment.center,</span><br><span class="line">                      color: Colors</span><br><span class="line">                          .primaries[index % Colors.primaries.length],</span><br><span class="line">                      child: Text(</span><br><span class="line">                        &#x27;$index&#x27;,</span><br><span class="line">                        style: const TextStyle(</span><br><span class="line">                            color: Colors.white, fontSize: 20.0),</span><br><span class="line">                      ),</span><br><span class="line">                    );</span><br><span class="line">                  &#125;,</span><br><span class="line">                  childCount: 25,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">          CustomScrollView(</span><br><span class="line">            slivers: [</span><br><span class="line">              SliverList(</span><br><span class="line">                delegate: SliverChildBuilderDelegate(</span><br><span class="line">                  (BuildContext context, int index) &#123;</span><br><span class="line">                    return Container(</span><br><span class="line">                      height: 85,</span><br><span class="line">                      alignment: Alignment.center,</span><br><span class="line">                      color: Colors</span><br><span class="line">                          .primaries[index % Colors.primaries.length],</span><br><span class="line">                      child: Text(</span><br><span class="line">                        &#x27;$index&#x27;,</span><br><span class="line">                        style: const TextStyle(</span><br><span class="line">                            color: Colors.white, fontSize: 20.0),</span><br><span class="line">                      ),</span><br><span class="line">                    );</span><br><span class="line">                  &#125;,</span><br><span class="line">                  childCount: 25,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-381c79d850c5f7c6.gif?imageMogr2/auto-orient/strip" alt="SliverAppBar"></p>
<h2 id="4-SliverPadding"><a href="#4-SliverPadding" class="headerlink" title="4. SliverPadding"></a>4. SliverPadding</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 专门用于在 滚动布局（如 CustomScrollView）中为子 Sliver 组件添加内边距的组件。它属于 Sliver 家族，适用于需要精细控制滚动区域间距的场景，例如在 SliverList、SliverGrid 等组件外部包裹边距</p>
</li>
<li><p><strong>规则：</strong> 仅能作为 CustomScrollView 的 slivers 数组的直接子组件使用，不可单独用于普通布局。SliverPadding 的 sliver 属性必须是一个 Sliver 类型的组件，否则会导致运行时错误</p>
</li>
</ul>
<p>核心参数：<br>padding（必填）：通过 EdgeInsets 设置边距（上、下、左、右或对称边距）。<br>sliver（必填）：接受任意 Sliver 组件（如 SliverList、SliverGrid）</p>
<ul>
<li><p><strong>注意：</strong> 普通 Padding 用于静态布局，而 SliverPadding 专为滚动视图优化，能正确计算滚动区域和视口边界，避免在 SliverPadding 内嵌套多层 Sliver 组件，推荐直接包裹目标组件，如需避开刘海屏或底部导航栏，优先使用 SliverSafeArea 而非 SliverPadding</p>
</li>
<li><p><strong>推荐：</strong> 列表&#x2F;网格的全局边距、复杂滚动布局的间隔控制</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">CustomScrollView(</span><br><span class="line">  slivers: [</span><br><span class="line">    const SliverAppBar(title: Text(&#x27;SliverPadding 示例&#x27;)),</span><br><span class="line">    SliverPadding(</span><br><span class="line">      padding: const EdgeInsets.all(20), // 全局边距</span><br><span class="line">      sliver: SliverList(</span><br><span class="line">        delegate: SliverChildBuilderDelegate(</span><br><span class="line">          (context, index) =&gt; ListTile(</span><br><span class="line">            title: Text(&quot;列表项 $index&quot;),</span><br><span class="line">          ),</span><br><span class="line">          childCount: 20,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    SliverPadding(</span><br><span class="line">      padding: const EdgeInsets.only(top: 30, bottom: 50), // 仅上下边距</span><br><span class="line">      sliver: SliverGrid(</span><br><span class="line">        gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">          crossAxisCount: 2,</span><br><span class="line">          crossAxisSpacing: 10,</span><br><span class="line">          mainAxisSpacing: 10,</span><br><span class="line">        ),</span><br><span class="line">        delegate: SliverChildBuilderDelegate(</span><br><span class="line">          (context, index) =&gt; Container(</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">            child: Center(child: Text(&quot;网格 $index&quot;)),</span><br><span class="line">          ),</span><br><span class="line">          childCount: 6,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-702f268897f0da9b.gif?imageMogr2/auto-orient/strip" alt="SliverPadding"></p>
<h2 id="5-SliverToBoxAdapter"><a href="#5-SliverToBoxAdapter" class="headerlink" title="5. SliverToBoxAdapter"></a>5. SliverToBoxAdapter</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 将普通 盒模型布局组件（如 Container、Text 等）嵌入到 Sliver 滚动布局（如 CustomScrollView）中的适配器。它允许非 Sliver 组件（即非滚动专用组件）作为 Sliver 列表的一部分参与滚动，在 CustomScrollView 的 slivers 列表中混合使用常规 Widget 与 Sliver 组件（如 SliverList、SliverGrid）</p>
</li>
<li><p><strong>规则：</strong> 只能用于 CustomScrollView.slivers 或嵌套的 Sliver 容器（如 SliverPadding），非 Sliver 组件（如 Container）必须指定高度或宽度，否则会因无限空间约束导致布局错误，若子组件包含 ListView 等自身可滚动的 Widget，需禁用其滚动行为（如 physics: NeverScrollableScrollPhysics()）</p>
</li>
<li><p><strong>注意：</strong> 尽量避免在 SliverToBoxAdapter 中嵌套过多的复杂布局，这可能会导致布局计算变慢，虽然 SliverToBoxAdapter 提供了便利性，但在大量使用时需要注意性能问题，尽量减少不必要的包裹，如果 child 的高度没有明确设置，可能会导致布局问题或渲染错误</p>
</li>
<li><p><strong>推荐：</strong> 列表头部&#x2F;尾部添加独立 Widget（如 Banner、标题、按钮）</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">CustomScrollView(</span><br><span class="line">  slivers: [</span><br><span class="line">    // 1. 顶部 Banner</span><br><span class="line">    SliverToBoxAdapter(</span><br><span class="line">      child: Container(</span><br><span class="line">        height: 200,</span><br><span class="line">        decoration: const BoxDecoration(</span><br><span class="line">          gradient: LinearGradient(colors: [Colors.blue, Colors.green]),</span><br><span class="line">        ),</span><br><span class="line">        child: const Center(</span><br><span class="line">            child: Text(&#x27;欢迎页&#x27;, style: TextStyle(fontSize: 24))),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    // 2. 分隔标题</span><br><span class="line">    SliverToBoxAdapter(</span><br><span class="line">      child: Padding(</span><br><span class="line">        padding: const EdgeInsets.all(16),</span><br><span class="line">        child: Text(&#x27;产品列表&#x27;,</span><br><span class="line">            style: Theme.of(context).textTheme.headlineSmall),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    // 3. 网格布局</span><br><span class="line">    SliverGrid(</span><br><span class="line">      gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">        crossAxisCount: 2,</span><br><span class="line">        childAspectRatio: 1.5,</span><br><span class="line">      ),</span><br><span class="line">      delegate: SliverChildBuilderDelegate(</span><br><span class="line">        (context, index) =&gt;</span><br><span class="line">            Card(child: Center(child: Text(&#x27;产品 $index&#x27;))),</span><br><span class="line">        childCount: 6,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    // 4. 底部按钮</span><br><span class="line">    SliverToBoxAdapter(</span><br><span class="line">      child: Padding(</span><br><span class="line">        padding: const EdgeInsets.symmetric(vertical: 20),</span><br><span class="line">        child: ElevatedButton(</span><br><span class="line">          onPressed: () &#123;&#125;,</span><br><span class="line">          child: const Text(&#x27;加载更多&#x27;),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-01d7b324eb8d37e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SliverToBoxAdapter"></p>
<h2 id="6-SliverFillRemaining"><a href="#6-SliverFillRemaining" class="headerlink" title="6. SliverFillRemaining"></a>6. SliverFillRemaining</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于 填充滚动视图剩余空间 的 Sliver 布局组件。它会根据父容器的剩余高度或宽度自动调整自身大小，确保内容区域占满屏幕可视区域。适用于需要动态适配剩余空间的场景</p>
</li>
<li><p><strong>规则：</strong> 作为 CustomScrollView 的 slivers 列表中的最后一个组件，用于填充剩余空间，允许组件自适应地填充剩余空间，无论剩余空间如何变化</p>
</li>
</ul>
<p><strong>关键参数</strong><br><strong>1. child：</strong> 必填，用于填充剩余空间的子组件。<br><strong>2. hasScrollBody：</strong></p>
</blockquote>
<ul>
<li>默认 true：子组件可滚动（如 ListView），适用于内容超出剩余空间的情况。</li>
<li>false：子组件不可滚动（如 Column），内容高度不超过剩余空间 710。<br><strong>3. fillOverscroll：</strong></li>
<li>true：在过度滚动时继续填充（如 iOS 回弹效果）。</li>
<li>false：仅填充未滚动区域（默认值）<blockquote>
<ul>
<li><p><strong>注意：</strong> 当 hasScrollBody: true 时，子组件必须是可滚动的（如 ListView），否则会抛出布局错误，SliverFillRemaining 在滚动视图中动态填充剩余空间，而 SingleChildScrollView 会尝试包裹整个内容，可能导致布局溢出，在长列表底部使用 SliverFillRemaining 时，避免在 child 中嵌套复杂布局，防止重复构建</p>
</li>
<li><p><strong>推荐：</strong> 表单底部固定按钮、分页加载占位、全屏内容适配</p>
</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">CustomScrollView(</span><br><span class="line">  slivers: &lt;Widget&gt;[</span><br><span class="line">    const SliverAppBar(</span><br><span class="line">      expandedHeight: 200.0,</span><br><span class="line">      flexibleSpace: FlexibleSpaceBar(</span><br><span class="line">        title: Text(&#x27;Flexible Space&#x27;),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    SliverList(</span><br><span class="line">      delegate: SliverChildListDelegate(</span><br><span class="line">        [</span><br><span class="line">          Container(</span><br><span class="line">            height: 500,</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">            alignment: Alignment.center,</span><br><span class="line">            child: const Text(&#x27;List Item&#x27;),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    SliverFillRemaining(</span><br><span class="line">      hasScrollBody: false,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">        alignment: Alignment.center,</span><br><span class="line">        child: const Text(&#x27;Fill Remaining Space&#x27;,</span><br><span class="line">            style: TextStyle(color: Colors.white)),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-fd770d6ba2b08b9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SliverFillRemaining"></p>
<h2 id="7-SliverPersistentHeader"><a href="#7-SliverPersistentHeader" class="headerlink" title="7. SliverPersistentHeader"></a>7. SliverPersistentHeader</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 创建可折叠&#x2F;悬浮的头部的Sliver组件，在滚动视图中创建一个持久化的头部组件，该头部组件可以根据滚动位置自动调整大小、透明度或其他属性。可以固定在页面顶部或底部，也可以随着滚动而动态变化，从而实现更加灵活的布局效果</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<p><strong>1. delegate：</strong> 必需属性，用于定义头部组件的构建逻辑。<br><strong>2. pinned：</strong> 布尔值，默认为 false，当设置为 true 时，头部组件会在滚动到顶部时固定在视图中。<br><strong>3. floating：</strong> 布尔值，默认为 false，当设置为 true 时，头部组件会在滚动到顶部时短暂显示，然后隐藏。</p>
<blockquote>
<ul>
<li><p><strong>注意：</strong> pinned 和 floating 属性不能同时为 true，避免在build()方法中执行耗时操作，推荐使用const组件或StatelessWidget。若内容复杂，用AutoDispose混合Riverpod管理状态，不可直接嵌套ListView等滚动组件，需通过SliverToBoxAdapter，确保minExtent和maxExtent精确计算，避免小数精度误差。必须显式指定头部组件的高度范围（minExtent 和 maxExtent）。如果依赖 overlapsContent 参数构建子组件，则必须保证之前至少还有一个 SliverPersistentHeader 或 SliverAppBar</p>
</li>
<li><p><strong>推荐：</strong> 电商分类导航、渐变收缩的Banner图</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">CustomScrollView(</span><br><span class="line">  slivers: &lt;Widget&gt;[</span><br><span class="line">    // 创建一个固定在页面顶部的 SliverPersistentHeader</span><br><span class="line">    SliverPersistentHeader(</span><br><span class="line">      pinned: true, // 固定在页面顶部</span><br><span class="line">      delegate: _MyHeaderDelegate(),</span><br><span class="line">    ),</span><br><span class="line">    // 添加一个普通的 SliverList</span><br><span class="line">    SliverList(</span><br><span class="line">      delegate: SliverChildBuilderDelegate(</span><br><span class="line">        (BuildContext context, int index) &#123;</span><br><span class="line">          return ListTile(</span><br><span class="line">            title: Text(&#x27;Item $index&#x27;),</span><br><span class="line">            leading: CircleAvatar(child: Text(&#x27;$index&#x27;)),</span><br><span class="line">          );</span><br><span class="line">        &#125;,</span><br><span class="line">        childCount: 50,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">class _MyHeaderDelegate extends SliverPersistentHeaderDelegate &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(</span><br><span class="line">      BuildContext context, double shrinkOffset, bool overlapsContent) &#123;</span><br><span class="line">    // 获取状态栏高度</span><br><span class="line">    final double statusBarHeight = MediaQuery.of(context).padding.top;</span><br><span class="line">    // 构建头部组件</span><br><span class="line">    return Container(</span><br><span class="line">      padding: EdgeInsets.only(top: statusBarHeight),</span><br><span class="line">      color: Colors.blue,</span><br><span class="line">      alignment: Alignment.center,</span><br><span class="line">      child: const Text(&#x27;Header&#x27;),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  double get maxExtent =&gt; 120; // 最大高度</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  double get minExtent =&gt; 40; // 最小高度</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldRebuild(covariant SliverPersistentHeaderDelegate oldDelegate) =&gt;</span><br><span class="line">      false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-e01779df913a06ea.gif?imageMogr2/auto-orient/strip" alt="SliverPersistentHeader"></p>
<h2 id="还有其他的一些Sliver布局控件"><a href="#还有其他的一些Sliver布局控件" class="headerlink" title="还有其他的一些Sliver布局控件"></a>还有其他的一些Sliver布局控件</h2><blockquote>
<p><strong>SliverFillViewport：填充视口</strong></p>
<p><strong>SliverAnimatedList：动画列表</strong></p>
<p><strong>SliverAnimatedOpacity：动画透明度</strong></p>
<p><strong>SliverIgnorePointer：忽略指针事件</strong></p>
<p><strong>SliverOpacity：透明度效果</strong></p>
<p><strong>SliverSafeArea：安全区域</strong></p>
<p><strong>SliverOverlapInjector：处理重叠</strong></p>
<p><strong>SliverOverlapAbsorber：吸收重叠</strong></p>
</blockquote>
<h1 id="响应式布局控件"><a href="#响应式布局控件" class="headerlink" title="响应式布局控件"></a>响应式布局控件</h1><h2 id="1-LayoutBuilder"><a href="#1-LayoutBuilder" class="headerlink" title="1. LayoutBuilder"></a>1. LayoutBuilder</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于根据父容器的约束对其子组件进行布局。它在布局过程中获取父组件传递的约束信息，从而动态构建布局。这使得开发者可以根据父容器的尺寸来调整子组件的布局，非常适合实现响应式布局</p>
</li>
<li><p><strong>规则：</strong> 根据设备尺寸动态调整布局，在开发过程中获取和调试约束信息，便于排查问题，如果是 Sliver 布局，可以使用 SliverLayoutBuilder</p>
</li>
</ul>
</blockquote>
<ol>
<li>constraints.maxWidth&#x2F;constraints.maxHeight ：父容器要求的最大尺寸</li>
<li>constraints.minWidth&#x2F;minHeight ：父容器要求的最小尺寸<blockquote>
<ul>
<li><p><strong>注意：</strong> 如果子组件超出显示大小，可能会导致频繁的 rebuild。解决方案是将 constraints 保存为成员变量，避免每次 build 都通过 LayoutBuilder 获取 constraints，当父容器的约束变化（如屏幕旋转、父容器尺寸调整）时，builder 会重新调用，考虑布局的复杂度和动画效果，避免过重的计算和不必要的重绘</p>
</li>
<li><p><strong>推荐：</strong> 要根据屏幕尺寸调整布局、获取约束信息，帮助调试布局问题</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Container(</span><br><span class="line">    width: 300, // 父容器宽度</span><br><span class="line">    height: 200, // 父容器高度</span><br><span class="line">    color: Colors.blue,</span><br><span class="line">    child: LayoutBuilder(</span><br><span class="line">      builder: (context, constraints) &#123;</span><br><span class="line">        // 根据父容器宽度动态切换布局</span><br><span class="line">        if (constraints.maxWidth &gt; 200) &#123;</span><br><span class="line">          return _buildWideLayout(constraints);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          return _buildNarrowLayout(constraints);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// 宽布局：水平排列</span><br><span class="line">Widget _buildWideLayout(BoxConstraints constraints) &#123;</span><br><span class="line">return Row(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.spaceEvenly,</span><br><span class="line">  children: [</span><br><span class="line">    Container(</span><br><span class="line">      width: constraints.maxWidth * 0.3, // 宽度占父级30%</span><br><span class="line">      height: 50,</span><br><span class="line">      color: Colors.red,</span><br><span class="line">    ),</span><br><span class="line">    Container(</span><br><span class="line">      width: constraints.maxWidth * 0.5, // 宽度占父级50%</span><br><span class="line">      height: 80,</span><br><span class="line">      color: Colors.green,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  // 窄布局：垂直排列</span><br><span class="line">Widget _buildNarrowLayout(BoxConstraints constraints) &#123;</span><br><span class="line">return Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [</span><br><span class="line">    Container(</span><br><span class="line">      width: constraints.maxWidth * 0.8, // 宽度占父级80%</span><br><span class="line">      height: 40,</span><br><span class="line">      color: Colors.orange,</span><br><span class="line">    ),</span><br><span class="line">    const SizedBox(height: 20),</span><br><span class="line">    Container(</span><br><span class="line">      width: constraints.maxWidth * 0.6, // 宽度占父级60%</span><br><span class="line">      height: 60,</span><br><span class="line">      color: Colors.purple,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">);</span><br><span class="line">&#125;     </span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-4db845824eabcc78.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="LayoutBuilder"></p>
<h2 id="2-OrientationBuilder"><a href="#2-OrientationBuilder" class="headerlink" title="2. OrientationBuilder"></a>2. OrientationBuilder</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 根据设备的方向（纵向或横向）动态构建布局。它提供了一个回调函数，当设备方向发生变化时，会调用该回调函数来重建布局。这使得开发者可以根据不同的屏幕方向提供不同的用户界面布局</p>
</li>
<li><p><strong>规则：</strong> 依赖于父组件的尺寸来判断当前的方向，而不是直接依赖于设备的方向。因此，在某些情况下，可能需要结合 MediaQuery 来获取更准确的方向信息</p>
</li>
<li><p><strong>注意：</strong> 由于 OrientationBuilder 依赖于父组件的尺寸，因此在某些情况下可能无法准确检测到设备的方向。建议在需要高精度方向检测时，结合 MediaQuery.of(context).orientation 使用</p>
</li>
<li><p><strong>推荐：</strong> 横竖屏显示不同排列的网格、列表，在多设备适配方案中作为基础工具</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">OrientationBuilder(</span><br><span class="line">  builder: (context, orientation) &#123;</span><br><span class="line">    return orientation == Orientation.portrait</span><br><span class="line">        ? _buildVerticalLayout()</span><br><span class="line">        : _buildHorizontalLayout();</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Widget _buildVerticalLayout() &#123;</span><br><span class="line">  return ListView(</span><br><span class="line">    children: const &lt;Widget&gt;[</span><br><span class="line">      ListTile(title: Text(&#x27;项目 1&#x27;)),</span><br><span class="line">      ListTile(title: Text(&#x27;项目 2&#x27;)),</span><br><span class="line">      ListTile(title: Text(&#x27;项目 3&#x27;)),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget _buildHorizontalLayout() &#123;</span><br><span class="line">  return GridView.count(</span><br><span class="line">    crossAxisCount: 3,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Container(</span><br><span class="line">        color: Colors.red,</span><br><span class="line">        child: const Center(child: Text(&#x27;项目 1&#x27;)),</span><br><span class="line">      ),</span><br><span class="line">      Container(</span><br><span class="line">        color: Colors.green,</span><br><span class="line">        child: const Center(child: Text(&#x27;项目 2&#x27;)),</span><br><span class="line">      ),</span><br><span class="line">      Container(</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">        child: const Center(child: Text(&#x27;项目 3&#x27;)),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-ddec17f776412266.gif?imageMogr2/auto-orient/strip" alt="OrientationBuilder"></p>
<h2 id="3-MediaQuery"><a href="#3-MediaQuery" class="headerlink" title="3. MediaQuery"></a>3. MediaQuery</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于获取设备的屏幕尺寸、方向、像素密度等信息。它可以帮助开发者创建响应式布局，以适应不同设备和屏幕尺寸</p>
</li>
<li><p><strong>规则：</strong><br><strong>1. 获取屏幕尺寸：</strong> 使用 MediaQuery.of(context).size 可以获取屏幕的宽度和高度。<br><strong>2. 获取方向：</strong> 使用 MediaQuery.of(context).orientation 可以获取设备的方向（竖屏或横屏）。<br><strong>3. 获取文本缩放因子：</strong> 使用 MediaQuery.of(context).textScaleFactor 可以获取用户的文本缩放设置。<br><strong>4. 获取系统亮度：</strong> 使用 MediaQuery.of(context).platformBrightness 可以获取系统的亮度模式（亮色或暗色）。<br><strong>5. 获取系统遮挡区域：</strong> 使用 MediaQuery.of(context).padding 可以获取系统遮挡区域的信息，如状态栏和导航栏的高度。</p>
</li>
<li><p><strong>注意：</strong> 频繁使用 MediaQuery.of(context).size 可能会导致不必要的小部件重建，影响性能。建议仅在需要的地方使用 MediaQuery，键盘弹出时，MediaQuery 的 viewInsets 属性会变化，开发者需要处理这种情况以避免布局问题</p>
</li>
<li><p><strong>推荐：</strong> 根据用户的文本缩放设置调整字体大小</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">var screenSize = MediaQuery.of(context).size;</span><br><span class="line">var textScaleFactor = MediaQuery.of(context).textScaleFactor;</span><br><span class="line">var orientation = MediaQuery.of(context).orientation;</span><br><span class="line">    </span><br><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [</span><br><span class="line">    Text(</span><br><span class="line">      &#x27;Screen Size: $&#123;screenSize.width&#125; x $&#123;screenSize.height&#125;&#x27;,</span><br><span class="line">      style: TextStyle(fontSize: 24),</span><br><span class="line">    ),</span><br><span class="line">    SizedBox(height: 10),</span><br><span class="line">    Text(</span><br><span class="line">      &#x27;Text Scale Factor: $textScaleFactor&#x27;,</span><br><span class="line">      style: TextStyle(fontSize: 24),</span><br><span class="line">    ),</span><br><span class="line">    SizedBox(height: 10),</span><br><span class="line">    Text(</span><br><span class="line">      &#x27;Orientation: $orientation&#x27;,</span><br><span class="line">      style: TextStyle(fontSize: 24),</span><br><span class="line">    ),</span><br><span class="line">    SizedBox(height: 20),</span><br><span class="line">    if (orientation == Orientation.portrait)</span><br><span class="line">      FilledButton(</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">        child: Text(&#x27;Button for Portrait Mode&#x27;),</span><br><span class="line">      )</span><br><span class="line">    else</span><br><span class="line">      FilledButton(</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">        child: Text(&#x27;Button for Landscape Mode&#x27;),</span><br><span class="line">      ),</span><br><span class="line">    SizedBox(height: 20),</span><br><span class="line">    FilledButton(</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">      child: Text(</span><br><span class="line">        &#x27;Custom Font Size Button&#x27;,</span><br><span class="line">        style: TextStyle(fontSize: 16 * textScaleFactor),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-df8089c55264499f.gif?imageMogr2/auto-orient/strip" alt="MediaQuery"></p>
<h2 id="4-AspectRatio"><a href="#4-AspectRatio" class="headerlink" title="4. AspectRatio"></a>4. AspectRatio</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 根据设备的方向（纵向或横向）动态构建不同的 UI 布局。当设备的方向发生变化时，OrientationBuilder 会重新构建其子组件树，以适应新的方向。这使得开发者能够轻松地实现横竖屏适配，它通过回调函数返回当前屏幕方向，无需依赖全局 MediaQuery</p>
</li>
<li><p><strong>规则：</strong> 根据设备的方向返回不同的布局组件，builder: 一个回调函数，接收两个参数：BuildContext 和 Orientation。Orientation 是一个枚举类型，包含两个值：Orientation.portrait 和 Orientation.landscape</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OrientationBuilder(</span><br><span class="line">  builder: (BuildContext context, Orientation orientation) &#123;</span><br><span class="line">    // 根据 orientation 的值返回不同的布局</span><br><span class="line">    return YourWidget();</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><p><strong>注意：</strong> 避免在 builder 函数中执行耗时操作（如网络请求），因其在屏幕旋转时可能频繁触发，直接通过回调提供方向，更适合布局构建阶段，仅监听方向变化，若需响应尺寸变化（如分屏模式），应结合 LayoutBuilder</p>
</li>
<li><p><strong>推荐：</strong> 视频播放器、表单输入</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AspectRatio(</span><br><span class="line">  aspectRatio: 16 / 9,</span><br><span class="line">  child: Container(color: Colors.blue),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-7818e3aebfcf1e62.gif?imageMogr2/auto-orient/strip" alt="AspectRatio"></p>
<h1 id="平台适配布局控件"><a href="#平台适配布局控件" class="headerlink" title="平台适配布局控件"></a>平台适配布局控件</h1><h2 id="1-SafeArea"><a href="#1-SafeArea" class="headerlink" title="1. SafeArea"></a>1. SafeArea</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于规避系统 UI（如状态栏、刘海屏、底部导航栏）的遮挡。它会根据设备屏幕的“安全区域”自动添加内边距（padding），确保内容不被系统控件覆盖，使 UI 动态且适应各种设备。在设计组件布局时，我们考虑了不同设备及其屏幕占用的约束，如状态栏、刘海屏、导航栏等。然而，新设备不断推出，设计各异，有时你的应用可能会覆盖这些占用的约束。因此，为了使 UI 适应性强且无错误，我们使用 SafeArea 组件。SafeArea 实际上是一个填充组件，根据设备运行时的情况，为你的应用添加必要的填充。如果应用的组件覆盖了系统特征，如刘海屏、状态栏、相机孔等，SafeArea 会根据需要在周围添加填充。SafeArea 内部使用 MediaQuery 检查屏幕尺寸，并在必要时包含额外填充。构造函数允许你决定是否在特定方向上避免侵入，通过布尔值 true 或 false 来实现</p>
</li>
<li><p><strong>规则：</strong> 在需要避免系统侵入的区域包裹 SafeArea 组件，通过 left、top、right、bottom 属性控制是否在相应方向上避免系统侵入；通过 minimum 属性设置最小填充；通过 maintainBottomViewPadding 属性决定是否保持底部填充不变，将需要保护的子组件放在 SafeArea 的 child 属性中</p>
</li>
<li><p><strong>注意：</strong> 当软键盘弹出时，底部填充可能会消失。可以通过设置 maintainBottomViewPadding 为 true 来保持底部填充不变，在页面骨架中直接应用，避免全局遮挡，在沉浸式全屏（如视频播放页）中需关闭 SafeArea，否则顶部留白，若父容器已设置 padding（如 ListView），SafeArea 可能造成双重边距。此时需手动调整，强制取消安全边距（如 padding: EdgeInsets.zero ）可能导致内容被遮挡</p>
</li>
<li><p><strong>推荐：</strong> 顶部状态栏区域、底部导航栏区域、刘海屏&#x2F;挖孔屏设备、弹窗&#x2F;浮层内容</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">SafeArea(</span><br><span class="line">  // 2. 关闭底部安全区域（自定义底部栏时使用）</span><br><span class="line">  bottom: false,</span><br><span class="line">  child: Column(</span><br><span class="line">    children: [</span><br><span class="line">      // 3. 顶部标题栏（自动避开状态栏）</span><br><span class="line">      const AppHeader(),</span><br><span class="line">      // 4. 内容区域（使用Expanded填充剩余空间）</span><br><span class="line">      Expanded(</span><br><span class="line">        child: ListView(</span><br><span class="line">          children: List.generate(</span><br><span class="line">              20, (i) =&gt; ListTile(title: Text(&quot;Item $i&quot;))),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      // 5. 自定义底部导航栏（需手动避开系统栏）</span><br><span class="line">      const CustomBottomBar(),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br><span class="line">        </span><br><span class="line">// 自定义顶部组件 </span><br><span class="line">class AppHeader extends StatelessWidget &#123;</span><br><span class="line">  const AppHeader(&#123;super.key&#125;); </span><br><span class="line"> </span><br><span class="line">  @override </span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Container(</span><br><span class="line">      color: Colors.blue, </span><br><span class="line">      padding: const EdgeInsets.all(16), </span><br><span class="line">      child: const Text(&quot;SafeArea Demo&quot;, style: TextStyle(color: Colors.white)), </span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">// 自定义底部组件（需单独处理安全边距）</span><br><span class="line">class CustomBottomBar extends StatelessWidget &#123;</span><br><span class="line">  const CustomBottomBar(&#123;super.key&#125;); </span><br><span class="line"> </span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    // 6. 为底部栏单独添加SafeArea </span><br><span class="line">    return SafeArea(</span><br><span class="line">      top: false, // 关闭顶部边距</span><br><span class="line">      minimum: const EdgeInsets.only(bottom:  10), // 追加额外外边距</span><br><span class="line">      child: Container(</span><br><span class="line">        height: 50,</span><br><span class="line">        color: Colors.green, </span><br><span class="line">        child: const Center(child: Text(&quot;Bottom Bar&quot;)),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-1a1e4d38633b59e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SafeArea"></p>
<h2 id="2-PlatformView"><a href="#2-PlatformView" class="headerlink" title="2. PlatformView"></a>2. PlatformView</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 允许在 Flutter 应用中嵌入原生的 UI 组件，如 Android 的 View 或 iOS 的 UIView</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
<ol>
<li>首先需要在原生代码中创建一个自定义的 PlatformView。</li>
<li>创建一个 PlatformViewFactory 来创建 PlatformView 实例，并将其与 Flutter 应用关联</li>
<li>通过 PlatformView Widget 将原生视图嵌入到 Flutter 应用中</li>
<li>通过 MethodChannel 实现 Dart 与原生代码的双向通信</li>
</ol>
<ul>
<li><p><strong>注意：</strong> 由于 PlatformView 是原生视图，频繁的交互可能会影响性能，因此应尽量减少不必要的原生视图嵌入，确保正确管理原生视图的生命周期，避免内存泄漏，不同平台的原生视图实现方式不同，需要分别处理 Android 和 iOS 的实现，Dart 的 viewType（native_text_view）需与原生注册的 ID 匹配</p>
</li>
<li><p><strong>推荐：</strong> 嵌入地图、视频播放、相机、文件选择器、WebView、条形码扫描</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line">// dart</span><br><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [</span><br><span class="line">    // Flutter 文本显示原生视图传回的时间</span><br><span class="line">    Text(&#x27;Flutter 显示: $_currentTime&#x27;,</span><br><span class="line">        style: const TextStyle(fontSize: 20)),</span><br><span class="line">    const SizedBox(height: 30),</span><br><span class="line">    // 原生视图容器</span><br><span class="line">    Container(</span><br><span class="line">      width: 300,</span><br><span class="line">      height: 200,</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        border: Border.all(color: Colors.blue, width: 2),</span><br><span class="line">        borderRadius: BorderRadius.circular(10),</span><br><span class="line">      ),</span><br><span class="line">      child: Platform.isAndroid</span><br><span class="line">          ? const AndroidView(</span><br><span class="line">              viewType: _viewType,</span><br><span class="line">              creationParams: &#123;&#x27;textColor&#x27;: &#x27;#FF0000&#x27;&#125;, // 红色文本</span><br><span class="line">              creationParamsCodec: StandardMessageCodec(),</span><br><span class="line">            )</span><br><span class="line">          : const UiKitView(</span><br><span class="line">              viewType: _viewType,</span><br><span class="line">              creationParams: &#123;&#x27;textSize&#x27;: 24.0&#125;, // iOS 文本大小</span><br><span class="line">              creationParamsCodec: StandardMessageCodec(),</span><br><span class="line">            ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// swift</span><br><span class="line">// TimeView.swift</span><br><span class="line">class TimeView: NSObject, FlutterPlatformView &#123;</span><br><span class="line">    private var label: UILabel</span><br><span class="line">    private var methodChannel: FlutterMethodChannel?</span><br><span class="line">    </span><br><span class="line">    init(frame: CGRect, viewIdentifier viewId: Int64, arguments args: Any?, messenger: FlutterBinaryMessenger) &#123;</span><br><span class="line">        label = UILabel(frame: frame)</span><br><span class="line">        label.textAlignment = .center</span><br><span class="line">        label.text = &quot;iOS原生时间视图&quot;</span><br><span class="line">        </span><br><span class="line">        super.init()</span><br><span class="line">        </span><br><span class="line">        // 解析Flutter传递的参数</span><br><span class="line">        if let params = args as? [String: Any], </span><br><span class="line">           let textSize = params[&quot;textSize&quot;] as? Double &#123;</span><br><span class="line">            label.font = UIFont.systemFont(ofSize: CGFloat(textSize))</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            label.font = UIFont.systemFont(ofSize: 20)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        label.textColor = .blue</span><br><span class="line">        </span><br><span class="line">        // 创建方法通道</span><br><span class="line">        methodChannel = FlutterMethodChannel(</span><br><span class="line">            name: &quot;com.example/time_channel&quot;, </span><br><span class="line">            binaryMessenger: messenger</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        methodChannel?.setMethodCallHandler(handleMethodCall)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func view() -&gt; UIView &#123;</span><br><span class="line">        return label</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func handleMethodCall(call: FlutterMethodCall, result: @escaping FlutterResult) &#123;</span><br><span class="line">        switch call.method &#123;</span><br><span class="line">        case &quot;getCurrentTime&quot;:</span><br><span class="line">            // 返回当前时间给Flutter</span><br><span class="line">            let formatter = DateFormatter()</span><br><span class="line">            formatter.dateFormat = &quot;HH:mm:ss&quot;</span><br><span class="line">            result(formatter.string(from: Date()))</span><br><span class="line">        default:</span><br><span class="line">            result(FlutterMethodNotImplemented)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// TimeViewFactory.swift</span><br><span class="line">class TimeViewFactory: NSObject, FlutterPlatformViewFactory &#123;</span><br><span class="line">    private var messenger: FlutterBinaryMessenger</span><br><span class="line"></span><br><span class="line">    init(messenger: FlutterBinaryMessenger) &#123;</span><br><span class="line">        self.messenger = messenger</span><br><span class="line">        super.init()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func createArgsCodec() -&gt; FlutterMessageCodec &amp; NSObjectProtocol &#123;</span><br><span class="line">        return FlutterStandardMessageCodec.sharedInstance()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func create(</span><br><span class="line">        withFrame frame: CGRect,</span><br><span class="line">        viewIdentifier viewId: Int64,</span><br><span class="line">        arguments args: Any?</span><br><span class="line">    ) -&gt; FlutterPlatformView &#123;</span><br><span class="line">        return TimeView(</span><br><span class="line">            frame: frame,</span><br><span class="line">            viewIdentifier: viewId,</span><br><span class="line">            arguments: args,</span><br><span class="line">            messenger: messenger</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AppDelegate.swift (添加部分)</span><br><span class="line"></span><br><span class="line">import UIKit</span><br><span class="line">import Flutter</span><br><span class="line"></span><br><span class="line">@UIApplicationMain</span><br><span class="line">@objc class AppDelegate: FlutterAppDelegate &#123;</span><br><span class="line">    override func application(</span><br><span class="line">        _ application: UIApplication,</span><br><span class="line">        didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?</span><br><span class="line">    ) -&gt; Bool &#123;</span><br><span class="line">        </span><br><span class="line">        let controller: FlutterViewController = window?.rootViewController as! FlutterViewController</span><br><span class="line">        </span><br><span class="line">        // 注册PlatformView</span><br><span class="line">        let factory = TimeViewFactory(messenger: controller.binaryMessenger)</span><br><span class="line">        registrar(forPlugin: &quot;TimeViewPlugin&quot;)?.register(</span><br><span class="line">            factory,</span><br><span class="line">            withId: &quot;com.example/NativeTimeView&quot;</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        GeneratedPluginRegistrant.register(with: self)</span><br><span class="line">        return super.application(application, didFinishLaunchingWithOptions: launchOptions)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ios 配置</span><br><span class="line">&lt;!-- ios/Runner/Info.plist --&gt;</span><br><span class="line">&lt;key&gt;io.flutter.embedded_views_preview&lt;/key&gt;</span><br><span class="line">&lt;true/&gt;</span><br><span class="line"></span><br><span class="line">// android</span><br><span class="line"></span><br><span class="line">// TimeView.kt</span><br><span class="line">package com.example.platformviewdemo;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.graphics.Color;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.widget.TextView;</span><br><span class="line">import androidx.annotation.NonNull;</span><br><span class="line">import androidx.annotation.Nullable;</span><br><span class="line">import io.flutter.plugin.common.BinaryMessenger;</span><br><span class="line">import io.flutter.plugin.common.MethodCall;</span><br><span class="line">import io.flutter.plugin.common.MethodChannel;</span><br><span class="line">import io.flutter.plugin.platform.PlatformView;</span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.Locale;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">class TimeView implements PlatformView, MethodChannel.MethodCallHandler &#123;</span><br><span class="line">    private final TextView textView;</span><br><span class="line">    private final MethodChannel methodChannel;</span><br><span class="line"></span><br><span class="line">    TimeView(Context context, BinaryMessenger messenger, int id, Map&lt;String, Object&gt; params) &#123;</span><br><span class="line">        textView = new TextView(context);</span><br><span class="line">        </span><br><span class="line">        // 解析Flutter传递的参数</span><br><span class="line">        if (params != null &amp;&amp; params.containsKey(&quot;textColor&quot;)) &#123;</span><br><span class="line">            String color = (String) params.get(&quot;textColor&quot;);</span><br><span class="line">            textView.setTextColor(Color.parseColor(color));</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            textView.setTextColor(Color.BLUE);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        textView.setTextSize(20);</span><br><span class="line">        textView.setText(&quot;Android原生时间视图&quot;);</span><br><span class="line">        </span><br><span class="line">        // 创建方法通道</span><br><span class="line">        methodChannel = new MethodChannel(messenger, &quot;com.example/time_channel&quot;);</span><br><span class="line">        methodChannel.setMethodCallHandler(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public View getView() &#123;</span><br><span class="line">        return textView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onMethodCall(@NonNull MethodCall call, @NonNull MethodChannel.Result result) &#123;</span><br><span class="line">        if (call.method.equals(&quot;getCurrentTime&quot;)) &#123;</span><br><span class="line">            // 返回当前时间给Flutter</span><br><span class="line">            SimpleDateFormat sdf = new SimpleDateFormat(&quot;HH:mm:ss&quot;, Locale.getDefault());</span><br><span class="line">            result.success(sdf.format(new Date()));</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            result.notImplemented();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void dispose() &#123;</span><br><span class="line">        methodChannel.setMethodCallHandler(null);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// TimeViewFactory.kt</span><br><span class="line">package com.example.platformviewdemo;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import io.flutter.plugin.common.BinaryMessenger;</span><br><span class="line">import io.flutter.plugin.common.StandardMessageCodec;</span><br><span class="line">import io.flutter.plugin.platform.PlatformView;</span><br><span class="line">import io.flutter.plugin.platform.PlatformViewFactory;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class TimeViewFactory extends PlatformViewFactory &#123;</span><br><span class="line">    private final BinaryMessenger messenger;</span><br><span class="line"></span><br><span class="line">    public TimeViewFactory(BinaryMessenger messenger) &#123;</span><br><span class="line">        super(StandardMessageCodec.INSTANCE);</span><br><span class="line">        this.messenger = messenger;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public PlatformView create(Context context, int viewId, Object args) &#123;</span><br><span class="line">        Map&lt;String, Object&gt; params = (Map&lt;String, Object&gt;) args;</span><br><span class="line">        return new TimeView(context, messenger, viewId, params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// android/app/src/main/java/com/example/platformviewdemo/MainActivity.kt</span><br><span class="line">package com.example.platformviewdemo;</span><br><span class="line"></span><br><span class="line">import androidx.annotation.NonNull;</span><br><span class="line">import io.flutter.embedding.android.FlutterActivity;</span><br><span class="line">import io.flutter.embedding.engine.FlutterEngine;</span><br><span class="line">import io.flutter.plugin.common.MethodChannel;</span><br><span class="line"></span><br><span class="line">public class MainActivity extends FlutterActivity &#123;</span><br><span class="line">    private static final String CHANNEL = &quot;com.example/time_channel&quot;;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) &#123;</span><br><span class="line">        super.configureFlutterEngine(flutterEngine);</span><br><span class="line">        </span><br><span class="line">        // 注册PlatformView</span><br><span class="line">        flutterEngine</span><br><span class="line">            .getPlatformViewsController()</span><br><span class="line">            .getRegistry()</span><br><span class="line">            .registerViewFactory(</span><br><span class="line">                &quot;com.example/NativeTimeView&quot;, </span><br><span class="line">                new TimeViewFactory(flutterEngine.getDartExecutor())</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>AndroidView：</strong> 嵌入Android原生视图</p>
<p><strong>UiKitView：</strong> 嵌入iOS原生视图</p>
<p><strong>平台适配：</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Platform.isIOS</span><br><span class="line">  ? CupertinoButton(onPressed: () &#123;&#125;, child: Text(&#x27;iOS&#x27;))</span><br><span class="line">  : ElevatedButton(onPressed: () &#123;&#125;, child: Text(&#x27;Android&#x27;));</span><br></pre></td></tr></table></figure>
<blockquote>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/1976231-a65a119896d825b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PlatformView"></p>
<h1 id="特殊布局控件"><a href="#特殊布局控件" class="headerlink" title="特殊布局控件"></a>特殊布局控件</h1><h2 id="1-Offstage"><a href="#1-Offstage" class="headerlink" title="1. Offstage"></a>1. Offstage</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于控制子组件是否参与布局和渲染的一个小部件，其核心功能是通过offstage属性切换子组件的可见状态</p>
</li>
<li><p><strong>规则：</strong> 当 offstage 属性设置为 true 时，子组件会被隐藏，并且不会参与布局或渲染，也不会占用任何空间，当 offstage 为 false 时，子组件正常显示</p>
</li>
<li><p><strong>注意：</strong> 如果子组件有动画，应该手动停止动画，因为 Offstage 不会停止动画，Offstage 不会从渲染树中移除子组件，只是不绘制和不响应点击事件，因此在需要频繁切换显示状态的场景中，Offstage 是一个高效的选择，隐藏状态的子组件不占用空间，可能导致父布局重新计算尺寸（如Column中的子组件隐藏后，其他子组件会向上移动）。需注意布局的稳定性，避免频繁切换导致界面抖动</p>
</li>
<li><p><strong>推荐：</strong> 实现平滑的显示&#x2F;隐藏动画（如淡入淡出、滑动入场）</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">bool _isHidden = false; // 控制文本是否隐藏</span><br><span class="line"></span><br><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [</span><br><span class="line">    // 使用 Offstage 控制文本显示</span><br><span class="line">    Offstage(</span><br><span class="line">      offstage: _isHidden,</span><br><span class="line">      child: const Text(</span><br><span class="line">        &#x27;Hello, Offstage!&#x27;,</span><br><span class="line">        style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    const SizedBox(height: 20),</span><br><span class="line">    // 切换按钮</span><br><span class="line">    ElevatedButton(</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        setState(() =&gt; _isHidden = !_isHidden);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(_isHidden ? &#x27;显示文本&#x27; : &#x27;隐藏文本&#x27;),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-2c858bd813c5b102.gif?imageMogr2/auto-orient/strip" alt="Offstage"></p>
<h2 id="2-Visibility"><a href="#2-Visibility" class="headerlink" title="2. Visibility"></a>2. Visibility</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于控制子组件的可见性。当设置为“可见”时，子组件将显示；设置为“隐藏”时，子组件将被隐藏。该组件还提供了多个可选属性来控制子组件的状态和行为，例如是否维持状态、动画、大小和交互性</p>
</li>
<li><p><strong>规则：</strong></p>
</li>
</ul>
</blockquote>
<ol>
<li><strong>child：</strong> 必填属性，指定要控制可见性的子组件。</li>
<li><strong>visible：</strong> 可选属性，布尔值，控制子组件的显示或隐藏，默认为true。</li>
<li><strong>replacement：</strong> 可选属性，当子组件不可见时显示的替代小部件。</li>
<li><strong>maintainState：</strong> 可选属性，布尔值，控制子组件状态是否保持不变，默认为false。</li>
<li><strong>maintainAnimation：</strong> 可选属性，布尔值，控制子组件动画是否保持不变，默认为false。</li>
<li><strong>maintainSize：</strong> 可选属性，布尔值，控制子组件空间是否保持不变，默认为false。</li>
<li><strong>maintainInteractivity：</strong> 可选属性，布尔值，控制子组件在不可见时是否仍可交互，默认为false。</li>
<li><strong>maintainSemantics：</strong> 可选属性，布尔值，控制子组件语义是否保持不变，默认为false。<blockquote>
<ul>
<li><p><strong>注意：</strong> 即使子组件被隐藏，其状态也会被维持，这在需要保留用户输入或状态的情况下非常有用，对高频切换显隐的组件（如列表项），避免启用 maintainState，防止内存泄漏，</p>
</li>
<li><p><strong>推荐：</strong> 表单动态字段、Tab 切换内容、配合 AnimatedSwitcher 实现渐变&#x2F;缩放效果</p>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Visibility(</span><br><span class="line">        visible: _isShown,</span><br><span class="line">        child: Container(</span><br><span class="line">          width: 100,</span><br><span class="line">          height: 100,</span><br><span class="line">          color: Colors.amber,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      const SizedBox(height: 20),</span><br><span class="line">      ElevatedButton(</span><br><span class="line">        onPressed: _toggleVisibility,</span><br><span class="line">        child: Text(_isShown ? &#x27;隐藏盒子&#x27; : &#x27;显示盒子&#x27;),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-831a3fd594b06b28.gif?imageMogr2/auto-orient/strip" alt="Visibility"></p>
<h2 id="3-IgnorePointer"><a href="#3-IgnorePointer" class="headerlink" title="3. IgnorePointer"></a>3. IgnorePointer</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于忽略其子组件的指针事件（如点击、拖动等）。这意味着包裹在 IgnorePointer 中的子组件将不会响应用户的交互操作，但仍然会显示在界面上。IgnorePointer 与 AbsorbPointer 类似，但 IgnorePointer 不会终止指针事件，而是让这些事件传递到其下方的组件</p>
</li>
<li><p><strong>规则：</strong> ignoring: 布尔值，决定是否忽略指针事件。默认为 true，ignoringSemantics: 布尔值，决定是否忽略语义信息。默认为 null，即不忽略，可以嵌套在任何布局组件（如 Stack、Column）中。<br>若多个 IgnorePointer 嵌套，外层 ignoring 为 true 时，内层设置无效，事件穿透：当 ignoring 为 true 时，子组件的点击事件会穿透到父级组件。适用于需要隐藏交互但保留显示效果的场景（如背景图、装饰元素）</p>
</li>
<li><p><strong>注意：</strong> 避免在复杂嵌套结构中滥用，可能导致不必要的渲染开销。优先结合 Stack 和 Positioned 实现局部交互控制，需动态控制 ignoring 时，建议通过 StatefulWidget 管理状态，配合 setState 更新，与 GestureDetector 结合使用时，需注意事件优先级。例如，外层 IgnorePointer 为 true 时，内层 GestureDetector 无法触发事件</p>
</li>
<li><p><strong>推荐：</strong> 背景图片、水印等无需交互的组件、表单提交时禁用按钮点击，防止重复提交、在 Stack 中叠加多个组件时，控制特定层的交互优先级</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [</span><br><span class="line">    // 使用 IgnorePointer 包裹按钮</span><br><span class="line">    IgnorePointer(</span><br><span class="line">      ignoring: _isIgnoring,</span><br><span class="line">      child: ElevatedButton(</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          print(&#x27;按钮被点击&#x27;);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: const Text(&#x27;可点击按钮&#x27;),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    const SizedBox(height: 20),</span><br><span class="line">    // 切换开关</span><br><span class="line">    Switch(</span><br><span class="line">      value: _isIgnoring,</span><br><span class="line">      onChanged: (value) &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          _isIgnoring = value;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      activeTrackColor: Colors.blueGrey,</span><br><span class="line">      activeColor: Colors.blue,</span><br><span class="line">    ),</span><br><span class="line">    const Text(&#x27;开关开启时按钮不可点击&#x27;),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-078c8668ce079a84.gif?imageMogr2/auto-orient/strip" alt="IgnorePointer"></p>
<h2 id="4-AbsorbPointer"><a href="#4-AbsorbPointer" class="headerlink" title="4. AbsorbPointer"></a>4. AbsorbPointer</h2><blockquote>
<ul>
<li><p><strong>说明：</strong> 用于阻止子组件接收指针事件的布局组件，其核心功能是通过终止命中测试（HitTest）来禁用子树的交互能力。它不会影响布局和绘制，仅控制事件传递</p>
</li>
<li><p><strong>规则：</strong> absorbing：布尔值，默认为 true。当设置为 true 时，子组件将无法接收用户输入事件，必须直接包裹需要禁用的子组件，且不影响父级或外部组件的交互</p>
</li>
<li><p><strong>注意：</strong> 虽然 AbsorbPointer 的使用不会显著影响性能，但在复杂的布局中应谨慎使用，避免不必要的嵌套，需配合状态管理（如 setState）动态控制 absorbing 属性，实现交互开关，即使 AbsorbPointer 设置为吸收模式，它仍然会将点击事件传递给其父组件。这意味着父组件的 GestureDetector 仍然能够捕获点击事件</p>
</li>
<li><p><strong>推荐：</strong> 临时禁用交互、批量禁用组件</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: [</span><br><span class="line">      // 外层可点击区域</span><br><span class="line">      GestureDetector(</span><br><span class="line">        // ignore: avoid_print</span><br><span class="line">        onTap: () =&gt; print(&#x27;外层点击&#x27;),</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.grey,</span><br><span class="line">          padding: const EdgeInsets.all(16),</span><br><span class="line">          child: AbsorbPointer(</span><br><span class="line">            absorbing: true, // 禁用子组件交互</span><br><span class="line">            child: Row(</span><br><span class="line">              children: [</span><br><span class="line">                ElevatedButton(</span><br><span class="line">                  // ignore: avoid_print</span><br><span class="line">                  onPressed: () =&gt; print(&#x27;按钮点击&#x27;),</span><br><span class="line">                  child: const Text(&#x27;禁用按钮&#x27;),</span><br><span class="line">                ),</span><br><span class="line">                const SizedBox(width: 16),</span><br><span class="line">                const Text(&#x27;不可点击区域&#x27;),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      const SizedBox(height: 20),</span><br><span class="line">      // 对比示例（交互正常）</span><br><span class="line">      GestureDetector(</span><br><span class="line">        // ignore: avoid_print</span><br><span class="line">        onTap: () =&gt; print(&#x27;外层点击&#x27;),</span><br><span class="line">        child: Container(</span><br><span class="line">          color: Colors.grey,</span><br><span class="line">          padding: const EdgeInsets.all(16),</span><br><span class="line">          child: AbsorbPointer(</span><br><span class="line">            absorbing: false, // 启用子组件交互</span><br><span class="line">            child: ElevatedButton(</span><br><span class="line">              // ignore: avoid_print</span><br><span class="line">              onPressed: () =&gt; print(&#x27;正常按钮&#x27;),</span><br><span class="line">              child: const Text(&#x27;可点击按钮&#x27;),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/1976231-8dd7fec9bf947ef9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AbsorbPointer"></p>
<blockquote>
<p><strong>Overlay  覆盖层</strong></p>
<p><strong>Opacity 透明度效果</strong></p>
<p><strong>AnimatedOpacity 动画透明度</strong></p>
<p><strong>ClipRRect 圆角裁剪</strong></p>
<p><strong>ClipOval  椭圆裁剪</strong></p>
<p><strong>ClipPath  路径裁剪</strong></p>
<p><strong>ClipRect  矩形裁剪</strong></p>
<p><strong>BackdropFilter  背景滤镜</strong></p>
<p><strong>DecoratedBox  装饰盒子</strong></p>
<p><strong>RotatedBox  旋转盒子</strong></p>
</blockquote>
<h1 id="平台特定布局控件"><a href="#平台特定布局控件" class="headerlink" title="平台特定布局控件"></a>平台特定布局控件</h1><blockquote>
<p><strong>CupertinoPageScaffold  iOS风格页面脚手架</strong></p>
<p><strong>CupertinoTabScaffold  iOS风格标签栏脚手架</strong></p>
<p><strong>CupertinoNavigationBar   iOS风格导航栏</strong></p>
<p><strong>CupertinoTabBar  iOS风格标签栏</strong></p>
<p><strong>CupertinoActionSheet  iOS风格操作表</strong></p>
<p><strong>CupertinoAlertDialog  iOS风格警告对话框</strong></p>
<p><strong>CupertinoContextMenu  iOS风格上下文菜单</strong></p>
<p><strong>MaterialApp	Material Design    应用容器</strong></p>
<p><strong>Scaffold	  Material Design   页面脚手架</strong></p>
<p><strong>AppBar	Material Design   应用栏</strong></p>
<p><strong>BottomAppBar   Material Design   底部应用栏</strong></p>
<p><strong>TabBar  Material Design   标签栏</strong></p>
<p><strong>Drawer  Material Design   抽屉</strong></p>
<p><strong>SnackBar  Material Design  底部消息条</strong></p>
<p><strong>BottomSheet  Material Design   底部表单</strong></p>
<p><strong>Material	Material Design   表面</strong></p>
<p><strong>Card  Material Design   卡片</strong></p>
<p><strong>Chip  Material Design  标签</strong></p>
<p><strong>Divider   Material Design 分割线：</strong> 水平分割线组件，常见于列表项、板块划分等场景</p>
<p><strong>ListTile   Material Design 列表项：</strong> 主要用于创建列表项（List Item），通常用于 ListView、Card 或 Drawer 等布局中</p>
</blockquote>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote>
<p>虽然 Flutter 提供了超过 100+ 个布局相关控件，以上列举覆盖了几乎所有官方核心布局控件，实际开发中最常用的约只有 15 个。掌握 <strong>Row&#x2F;Column&#x2F;Stack&#x2F;Expanded&#x2F;ListView</strong>这五个核心组件即可解决绝大多数布局需求。</p>
<p><strong>基础布局三巨头：</strong> Row&#x2F;Column（线性布局）、Stack（层叠布局）、ListView&#x2F;GridView（滚动布局）满足 80% 场景</p>
<p><strong>弹性布局必用：</strong> Expanded 和 Flexible 是自适应布局的核心</p>
<p><strong>性能关键：</strong> 长列表必用 ListView.builder，避免滥用 IntrinsicWidth&#x2F;Height，复杂动画使用 CustomMultiChildLayout</p>
<p><strong>响应式最佳实践：</strong> LayoutBuilder + MediaQuery + 约束条件判断</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/GavinCarter1991/flutter-layout-demo">DEMO</a></p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://gavincarter1991.github.io/2025/07/07/Flutter-%E8%AF%A6%E8%A7%A3%E5%B8%83%E5%B1%80/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E2%80%9CFlutter%E2%80%9D/" rel="tag">“Flutter”</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E2%80%9CLayout%E2%80%9D/" rel="tag">“Layout”</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B8%83%E5%B1%80/" rel="tag">布局</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2025/07/24/C-%E5%85%A5%E9%97%A8/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            C++ 基础入门
          
        </div>
      </a>
    
    
      <a href="/2025/06/19/%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E7%AE%A1%E7%90%86%E5%A4%9A%E4%B8%AAcocoapods%E8%B4%A6%E5%8F%B7/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">一台电脑管理多个cocoapods账号</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.staticfile.org/valine/1.4.16/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "a1S86fOlOUpjKlnF6GbDEaXa-gzGzoHsz",
    app_key: "I8KJc5Z8uB7wXwz3r7Mab2Rx",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "留下您的宝贵意见...",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2025
        <i class="ri-heart-fill heart_icon"></i> kindyourself@163.com
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Gavin&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="https://www.jianshu.com/u/51707eacf496">简书</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="https://blog.csdn.net/gavincarter1991/article/list">CSDN</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.png">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.png">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>